@(title: String, hPathAfter:Option[Html] = None, nodeOpt: Option[MAdnNode] = None, headAfter: Option[Html] = None)(content: Html)(implicit ctx: Context)

@* Подложка для страниц, работающих с унифицированными adn-узлами. *@
@import sys1.market._
@import ctx._

@hPathAfter1 = {
  / <a class="blue-link" href="@routes.SysMarket.adnNodesList()">ADN</a>
  @nodeOpt.flatMap(_.adn.supId).map { supId =>
    / <a class="blue-link" href="@routes.SysMarket.showAdnNode(supId)">..</a>
  }
  @nodeOpt.map { node =>
    / <a class="blue-link" href="@routes.SysMarket.showAdnNode(node.id.get)"
         title="@messages("amt.of.type." + node.adn.shownTypeId) / @node.meta.town">@node.meta.name</a>
  }
  @hPathAfter.getOrElse {
    / @title
  }
}

@marketBase(
  title         = title + " | ADN",
  hPathAfter    = Some(hPathAfter1),
  headAfter     = headAfter
)(content)
