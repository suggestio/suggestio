@(args: msc.ScRenderArgs)(implicit ctx: Context)

@import util.TplDataFormatUtil._
@import util.showcase.ShowcaseUtil.TILES_BG_FILL_ALPHA
@import io.suggest.sc.ScConstants.Grid._

@stuff._scrollableContainerTpl("sm-grid-ads", ROOT_DIV_ID) {

  <div class="sm-grid-ads_container" id="smGridAdsContainer" @if(!args.syncRender) {data-index-offers-action="@routes.MarketShowcase.findAds(args.spsr)"} >
    @* Заинлайненные рекламные карточки при синхронном рендере. *@
    @for(tile <- args.inlineTiles) {
      @args.jsStateOpt.map { jsState =>
        <a href="@args.syncUrl( jsState.copy(fadOpenedIdOpt = tile.mad.id, navScrOpenedOpt = None, searchScrOpenedOpt = None) )">
      }
      @tile.rendered
      @if(args.jsStateOpt) {
        </a>
      }
    }
  </div>

  @if(!args.syncRender) {
    <div class="sm-grid-ads_loader hidden" id="smGridAdsLoader">
      <div class="sm-grid-ads_loader-spinner"><div class="sm-grid-ads_loader-spinner-inner">@svg._spinnerTpl(args.bgColor)</div></div>
    </div>
  }

}

<style>

  .sm-grid-ads_loader {
    background-image: url('data:image/svg+xml;utf8,<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="10px" height="5px" viewBox="0 0 10 5" enable-background="new 0 0 10 5" xml:space="preserve"><polygon fill="#@args.bgColor" points="10,3.16 5,0 0,3.16 0,5 5,1.84 10,5 "/></svg>');
    background-repeat: repeat-x;
  }

  .sm-grid-ads,
  .sm-grid-ads_loader-spinner-inner{
    background-color: rgba(@{colorHex2rgb(args.bgColor).mkString(",")},@TILES_BG_FILL_ALPHA)!important;
  }

</style>
