@(args: msc.ScRenderArgs)(implicit ctx: Context)

@* Панель навигации по узлам сети s.io (левая панель). *@

@import ctx.messages
@import util.TplDataFormatUtil._
@import msc._
@import views.html.sc.stuff._


<style type="text/css">

  .shops-list_row {
    color:#@args.fgColor;
  }

  .geo-nodes-list_rows {
    background: #@args.bgColor;
  }

  .geo-nodes-list_layer,
  .geo-nodes-list_row {
    color: #@args.fgColor;
  }

  #smGeoLocationLabel {
    color: #@args.fgColor;
  }

  @defining( colorRgb2Hsl(colorHex2rgb(args.bgColor)).toArray ) { bgHslColor =>
    .geo-nodes-list_rows {
      -webkit-box-shadow: inset 0px 5px 5px hsl( @{bgHslColor(0)}, @{bgHslColor(1)}%, @{bgHslColor(2)-6}% );
      box-shadow: inset 0px 5px 5px hsl( @{bgHslColor(0)}, @{bgHslColor(1)}%, @{bgHslColor(2)-6}% );
    }

    .geo-nodes-list_row.__even {
      background-color: hsl( @{bgHslColor(0)}, @{bgHslColor(1)}%, @{bgHslColor(2)-3}%);
    }
  }

  @defining( formatRgbHexColorCss(args.bgColor, Some(0.8F)) ) { bgColorCode =>
    .sm-geo-nodes {
      background-color: @bgColorCode;
      height: 83%;
    }

    .sm-geo-screen_current-location {
      background-color: @bgColorCode;
    }
  }

  @defining( colorHex2rgb(args.fgColor).mkString(",") ) { fgColorBody =>
    .geo-nodes-list_layer {
      border-color: rgba( @fgColorBody, 0.5 );
    }

    .geo-nodes-list_layer-icon path,
    .geo-nodes-list_layer-icon-right path{
      fill:     #@args.fgColor;
    }


    .geo-nodes-list_row,
    .sm-geo-screen_current-location-inner {
      border-color: rgba( @fgColorBody, 0.5 );
    }

    .geo-nodes-links {
      color: rgba( @fgColorBody, 0.5 );
    }
  }

</style>


<div class="sm-geo-screen" id="smGeoScreen" @if(args.jsStateOpt.exists(_.isNavScrOpened)) {style="display: block; height: 83%;"} >

  <div class="sm-geo-screen_header">

    @* В синхронном режиме рендерим кнопку ссылкой. *@
    @args.jsStateOpt.map { jsState =>
      <a href="@args.syncUrl( jsState.toggleNavScreen )">
    }
    @ScHdrBtns.NavPanelClose( args.hBtnArgs )
    @if(args.jsStateOpt) {
      </a>
    }

  </div>


  <div class="sm-geo-screen_current-location" id="smGeoLocationButton">
    <div class="sm-geo-screen_current-location-inner">
      <div class="sm-geo-screen_current-location-icon" id="smGeoLocationButtonIcon">@svg._geoRefresh(args.fgColor)</div>
      <div class="sm-geo-screen_current-location-spinner" id="smGeoLocationButtonSpinner">@svg._spinnerTpl(args.fgColor)</div>
      <span id="smGeoLocationLabel">
        @args.adnNodeCurrentGeo.fold( messages("Detect.geolocation") )( _.meta.basic.name )
      </span>
    </div>
  </div>

  @_scrollableContainerTpl( "sm-geo-nodes", id = "smGeoNodes") {
    @args.inlineNodesList
  }

</div>
