@(args: adv.geo.tag.IForAdTplArgs)(implicit ctx: Context)

@* Шаблон формы размещения карточки в тегах с географией. *@

@import ctx.{messages, request}
@import helper._
@import util.FC.tdRadialFc
@import lk.tag.edit._
@import lk.adv.widgets._
@import io.suggest.adv.geo.AdvGeoConstants._
@import io.suggest.adv.AdvConstants._
@import lk.dsl._
@import views.html.stuff._labelTpl

@_barTpl(MHands.Left) {
  @_minorTitleTpl() {
    @messages("Tags.choosing")
  }

  @* js-форма добавления тегов. *@
  @_addFormTpl(args.form)

  @* Кнопка добавления тега. Вне формы, т.к. форма перезаписывается после сабмитов. *@
  @_addBtnTpl()
}

@form( CSRF(routes.LkAdvGeo.forAdSubmit(args.mad.id.get)), 'id -> FORM_ID) {

  @_advSuTpl()

  @* Теги *@
  @_barTpl(MHands.Left) {
    @* Рендер сохранённых тегов. *@
    @_existTagsContTpl() {
      @_tagsExistTpl(args.form)
    }

    @* Отдельная галочка для размещения на главном экране. *@
    @defining(args.form(OnMainScreen.FN)) { omsf =>
      @_labelTpl() {
        <input type="checkbox" id="@OnMainScreen.ID" name="@omsf.name" value="true" @if(omsf.value.nonEmpty){checked="checked"}/>
        <span class="styled-checkbox"></span>
        @messages("Adv.on.main.screen")
      }
    }
  }


  @* Даты (период) размещения. *@
  @_barTpl(MHands.Right) {
    @_minorTitleTpl() {
      @messages("Date.choosing")
    }

    @period._contTpl() {
      @period._formTpl(args.form(PERIOD_FN), args.advPeriodsAvail)
      @for(v <- args.form.value) {
        @period._reportTpl(v.period)
      }
    }
  }


  @* Для сохранения и восстановления состояния карты при POST нужны hidden-поля в рамках формы. *@
  @_radMapInputsTpl( args.form(RADMAP_FN) )

}
