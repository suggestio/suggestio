@(mnode: MAdnNode, slaves: Seq[MAdnNode], advertisers: Seq[MAdnNode], isMyNode: Boolean,
  povAdnIdOpt: Option[String], advReqsCount: Long, showBackBtn: Boolean, showAdvsBtn: Boolean,
  welcomeAdOpt: Option[MWelcomeAd])(implicit ctx: Context)

@* Заглавная страница узла рекламной сети в личных кабинетах.
   Если isMyNode, то идёт рендер управляемого узла, и povAdnIdOpt игнорируется.
   Если !isMyNode, то юзер смотрит чужой нередактируемый узел. *@

@import controllers.MarketShowcase.SITE_BGCOLOR_DFLT
@import ctx._
@import node._
@import util.img.GalleryUtil
@import util.img.DynImgUtil

@nodeBaseTpl(
  title         = "Ваш профиль",
  isMyNode      = isMyNode,
  node          = mnode,
  rightCurrEl   = NodeRightPanelLinks.RPL_NODE,
  povAdnIdOpt   = povAdnIdOpt
) {

  <div class="profile_logo-bar">
    @if(mnode.meta.color.isDefined) {
      @mnode.logoImgOpt.map { img =>
        <div class="image __size-L" style="background-color: #@mnode.meta.color;">
          <img class="image_src" src="@DynImgUtil.imgCall(img.filename)" alt="@mnode.meta.name"/>
        </div>
      }
    }
  </div>

  <div class="profile_info-bar">
    <hr class="delimiter __light"/>

    @lk.lkProp(){ Название } { @mnode.meta.name }

    @if(mnode.meta.town.isDefined) {
      @lk.lkProp(){ Адрес } { @mnode.meta.town@if(mnode.meta.address.isDefined) {, @mnode.meta.address} }
    }

    @if(mnode.meta.siteUrl.isDefined) {
      @lk.lkProp(){ Сайт } { <a class="link" href="@mnode.meta.siteUrl" target="_blank">@mnode.meta.siteUrl</a> }
    }

    @if(mnode.meta.info.isDefined) {
      @lk.lkProp(){ Информация о товарах или услугах } { @mnode.meta.info  }
    }


    @if(mnode.adn.isReceiver) {
      <hr class="delimiter __light"/>
      @lk.lkProp(){ Суточный трафик } { @mnode.meta.humanTrafficAvg  }
      @lk.lkProp(){ Описание аудитории } { @mnode.meta.audienceDescr  }

      @* TODO добавить вывод картинки приветствия *@

      <hr class="delimiter __light"/>
      <div class="prop">
        <p class="prop_name __block">Фотографии объекта:</p>
        <div class="profile_photo-lst">
          <div class="js-photo-slider">

            @mnode.gallery.map { imgId =>
              <img class="profile_photo-i" src="@GalleryUtil.dynLkBigCall(imgId)" />
            }

          </div>
        </div>
      </div>
    }

    <hr class="delimiter __light"/>

    <table class="prop">
      <td class="prop_name td">
        Цвет фона шапки где будет располагаться ваш логотип
      </td>
      <td class="td __color-title">
        <span class="dark-gray ft-S">Основной<br/>цвет</span>
      </td>
      <td class="td __padding-S">
        <div class="color" style="background-color: #@mnode.meta.color.getOrElse(SITE_BGCOLOR_DFLT);"></div>
      </td>
      <td class="td __padding-S">
        <div class="delimiter __light __vertical js-vertical-line"></div>
      </td>
      <td class="td __padding-S prop_name">
        Цвет текста и иконок категорий в ленте выдачи
      </td>
      <td class="td __color-title">
        <span class="dark-gray ft-S">Цвет<br/>контента</span>
      </td>
      <td class="td __padding-S dark-gray">
        <div class="color" style="background-color: #@mnode.meta.fgColor.getOrElse(SITE_BGCOLOR_DFLT);"></div>
      </td>
    </table>

  </div>


  @* У узла-приемника/супервизора есть доступ к списку входных продьюсеров рекламы и доступ к коду установки. *@
  @*if(isMyNode) {
  @defining(mnode.adn.isReceiver) { isRcvr =>
  @if(isRcvr || showAdvsBtn || mnode.adn.isSupervisor) {
  <div class="adn-title-buttons">

    @if(showAdvsBtn) {
    <a class="siom-link-btn __size-M __ft-L __color-5 f-right" href="@routes.MarketAdv.showNodeAdvs(mnode.id.get)">
      @if(advReqsCount > 0) {<span class="lk-adv-reqs-count attention-icon">@advReqsCount</span>}
      РЕКЛАМОДАТЕЛИ
    </a>
    }

    @if(isRcvr) {
      <a class="siom-link-btn __size-M __ft-L __color-5 __list-element f-right js-btn" href="#installScriptPopup">СКРИПТ на САЙТ</a>
    }

  </div>
  }
  }
  }*@

  @* Ресиверу надо отрендерить список его рекламодателей, если они есть. *@
  @*if(isMyNode && !advertisers.isEmpty) {
    @_advertisersListTpl(advertisers, povAdnIdOpt = mnode.id)
  }*@


  @* Супервизору надо отрендерить табличку подчиненых узлов: для реализации надзорных полномочий.
     Если этот узел не может супервайзить, то slaves должен быть пустым. *@
  @*if(isMyNode && !slaves.isEmpty) {
    @_supShowNodesTpl(mnode, slaves)
  }*@

}

