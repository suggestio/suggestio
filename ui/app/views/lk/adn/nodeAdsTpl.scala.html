@(mnode: MAdnNode, mode: MNodeAdsMode, mads: Seq[blk.IRenderArgs], isMyNode: Boolean, povAdnIdOpt: Option[String], canAdv: Boolean,
  ad2advMap: Map[String, MAdvI])(implicit ctx: Context)

@* Страница в ЛК, которая отображает карточки узла. *@
@import ctx._
@import node._
@import lk.right._

@rightBar = {
  @_navTpl( sysCall = mnode.id.map(routes.SysMarket.showAdnNode) ) {
    @_navItemTpl(
      title = messages("Ads.all"),
      css   = Seq("__all-cards", "__act")
    )

    @_navItemTpl(
      title = messages("Ads.on.review"),
      css   = Seq("__in-process")
    )

    @_navItemTpl(
      title = messages("Ads.published"),
      css   = Seq("__active-cards")
    )
  }
}


@lk.lkBaseLayout(
  title         = messages("Ad.cards"),
  nodeOpt       = Some(mnode),
  leftCurrEl    = Some(LkLeftPanelLinks.LPL_ADS),
  rightBar      = Some(rightBar),
  povAdnId      = povAdnIdOpt
) {

  @if(mnode.adn.isProducer) {
    @if(isMyNode) {
      @_myAdsTpl(mnode, mads, canAdv, ad2advMap)
    } else {
      @_readOnlyAdsListTpl(mads, povAdnIdOpt, ad2advMap)
    }

    @* Ссылка на demo web site. *@
    @if(isMyNode) {
      <div class="sm-note">
        @if(mnode.adn.isReceiver) {
          @messages("You.can.look.on.ads.in")
          <a class="blue-link" href="@ctx.SC_URL_PREFIX@routes.MarketShowcase.geoSite(msc.ScJsState(adnId = mnode.id))"
             target="_blank">@messages("_ad.showcase.link")</a>.
        }
      </div>
    }
  }

}
