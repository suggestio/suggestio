@(mad: MAdT, args: blk.RenderArgs, bc: util.blocks.BlocksConf.CommonBlock2T)(implicit ctx: Context)

@* Базовый шаблон тела block'ов версии 2.0. *@

@import views.txt.blocks.common._

@defining( args.inlineStyles || mad.id.isEmpty ) { isStylesInline =>

  @bgImgTpl(mad, bc, args,  cssClass = Some("bg") )

  @if(isStylesInline) {
    <style>@Html(_blockCss( blk.CssRenderArgs(mad, args) ).toString.trim)</style>
  }

  @mad.offers.map { offer =>

    @defining("title") { fid =>
    @offer.text1.map { aosf =>
      <div class="@if(args.withEdit){js-mvbl} mvbl-@fid mvbl-@fid-@offer.n"
           @if(args.withEdit) {data-connected-input="ad.offer.offer[@offer.n].@fid"}>
        <div class="@fid @fid-@offer.n">@Html(aosf.value)</div>
      </div>
      @if(isStylesInline) {
        <style>
          @Html(_textCss(blk.FieldCssRenderArgs2(
            mad     = mad,
            aovf    = aosf,
            bf      = bc.titleBf,
            brArgs  = args,
            offerN  = offer.n,
            yoff    = 0,
            fid     = fid,
            cssClasses = args.withCssClasses
          )).toString.trim)
        </style>
      }
    }
    }

  }

}
