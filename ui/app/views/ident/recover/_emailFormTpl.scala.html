@(rf: EmailPwRegReqForm_t)(implicit ctx: Context)

@* Форма восстановления пароля: ввод email и капчи. *@

@import ctx._
@import helper._
@import controllers.Captcha.{CAPTCHA_ID_FN, CAPTCHA_TYPED_FN}
@import io.suggest.util.StringUtil.randomId
@import util.FC.authFc


@form(CSRF(routes.Ident.recoverPwFormSubmit), 'class -> "recover-popup__content__form") {

    @inputText(
      rf("email"),
      '_label       -> "Электронная почта, указанная при регистрации:",
      'placeholder  -> "Электронная почта, указанная при регистрации",
      'type         -> "email"
    )

    @* Капча *@
    <div class="captcha">
      @defining( rf(CAPTCHA_ID_FN).value.filter(!_.isEmpty).getOrElse(randomId(6, ctx.PRNG)) ) { captchaId =>
        <input id="captchaId" type="hidden" name="captchaId" value="@captchaId"/>
        <img class="captcha_img" id="captchaImage" src="@routes.Captcha.getDigitalCaptcha(captchaId)" alt=""/>
        <a class="captcha_reload-btn __small" id="captchaReload" data-for="#captchaImage" href=""></a>
      }
    </div>

    @inputText(
      rf(CAPTCHA_TYPED_FN),
      '_label       -> Messages("Input.text.from.picture"),
      'type -> "tel",
      'placeholder  -> "Введите текст с картинки"
    )

    <div class="btn-w __size-M">
      <input class="btn __size-M1 __minor" type="submit" value='Отправить'/>
    </div>

}
