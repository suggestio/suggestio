@(rf: EmailPwRegReqForm_t, captchaShown: Boolean = false)(implicit ctx: Context)

@import helper._
@import controllers.Ident.{CAPTCHA_ID_FN, CAPTCHA_TYPED_FN}
@import io.suggest.util.StringUtil.randomId
@import ctx._
@import util.FC.authFc


@form( CSRF(routes.Ident.emailRegSubmit()), 'id -> "indexRegForm" ) {

  @rf.globalError.map { ge =>
    <p class="error-msg">@Messages("Error"): @Messages(ge.message)</p>
  }

  @inputText(
    rf("email"),
    '_label       -> "e-mail",
    'type         -> "email",
    'placeholder  -> Messages("Your.email.addr")
  )


  <div class="js-hidden">

    <div class="auth-page_input">
      @* Капча, которая появляется, когда есть активность, связанная с полем регистрации или долбления на кнопку "отправить". *@
      @defining( rf(CAPTCHA_ID_FN).value.filter(!_.isEmpty).getOrElse(randomId(6, ctx.PRNG)) ) { captchaId =>
        <input id="captchaId" type="hidden" name="@CAPTCHA_ID_FN" value="@captchaId"/>
        <img class="captcha_img" id="captchaImageRegistrationForm"
             src="@if(captchaShown){@routes.Captcha.getDigitalCaptcha(captchaId)}" alt="" />
        <a class="captcha_reload-btn __small" id="captchaReload" data-for="#captchaImageRegistrationForm" href=""></a>
      }
    </div>

    @defining( Messages("Input.text.from.picture") ) { msg =>
      @inputText(
        rf(CAPTCHA_TYPED_FN),
        '_label       -> msg,
        'type         -> "tel",
        'placeholder  -> msg
      )
    }

  </div>

  <p class="auth-page_descr">
    @Messages("Mailbox.ll.be.mailed.with.reg.confirm.msg")
  </p>

  <p class="auth-page_descr">
    @Html(Messages(
      "Getting.started.with.sio.you.agreed.with.policy",
      s"""<a class="auth-page_link" href="${routes.Static.privacyPolicy()}">""",
      "</a>"
    ))
  </p>

  <div class="btn-w __size-M">
    <input class="btn __size-M1 __minor" type="submit" value="@Messages("Send")" />
  </div>

}
