@(rf: EmailPwRegReqForm_t, captchaShown: Boolean = false)(implicit ctx: Context)

@import helper._
@import controllers.Ident.{CAPTCHA_ID_FN, CAPTCHA_TYPED_FN}
@import io.suggest.util.StringUtil.randomId
@import ctx._
@import util.FC.authFc


@form( CSRF(routes.Ident.emailRegSubmit()), 'id -> "indexRegForm" ) {

  @rf.globalError.map { ge =>
    <p class="error-msg">Ошибка: @Messages(ge.message)</p>
  }

  @inputText(
    rf("email"),
    '_label -> "e-mail",
    'type -> "email",
    'placeholder -> "E-mail"
  )


  <div class="js-hidden">

    <div class="auth-page_input">
      @* Капча, которая появляется, когда есть активность, связанная с полем регистрации или долбления на кнопку "отправить". *@
      @defining( rf(CAPTCHA_ID_FN).value.filter(!_.isEmpty).getOrElse(randomId(6, ctx.PRNG)) ) { captchaId =>
        <input id="captchaId" type="hidden" name="@CAPTCHA_ID_FN" value="@captchaId"/>
        <img class="captcha_img" id="captchaImageRegistrationForm"
             src="@if(captchaShown){@routes.Captcha.getDigitalCaptcha(captchaId)}" alt="" />
        <a class="captcha_reload-btn __small" id="captchaReload" data-for="#captchaImageRegistrationForm" href=""></a>
      }
    </div>

    @inputText(
      rf(CAPTCHA_TYPED_FN),
      '_label -> "Введите код с картинки",
      'type -> "tel",
      'placeholder -> "Введите код с картинки"
    )

  </div>

  <p class="auth-page_descr">
    На электронную почту будет отправлено
    письмо  с подтвержением регистрации.
  </p>

  <p class="auth-page_descr">
    Приступая к работе с Suggest.io Вы
    соглашаетесь с <a class="auth-page_link" href="@routes.Static.privacyPolicy">Политикой конфиденциальности</a>
  </p>

  <div class="btn-w __size-M">
    <input class="btn __size-M1 __minor" type="submit" value="Отправить" />
  </div>

}
