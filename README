sioweb2
=====================================
Вёб-морда для suggest.io на базе play 2+.

Для имитации геолокации в выдаче, можно использовать это:
sm.geo.geo_position_obj = {};
sm.geo.geo_position_obj.coords = {latitude : 59.9, longitude : 11.1, accuracy: 20 }


Подготовка рабочей станции к первой сборке проекта
=====================================
npm install -g yo grunt bower
Можно также попробовать без флага -g, но не факт, что всё будет работать как надо.

Если в процессе работы npm вылетают ошибки типа
  npm ERR! Failed to parse json
  npm ERR! Unexpected token a
  npm ERR! File: /home/user/.npm/tar/0.1.20/package/package.json
то нужно удалить соотв. директорию, т.е. в данном примере
$ rm -rf /home/user/.npm/tar

Затем запустить sbt. В консоли sbt вбить команды:
  npm install
  bower install
При ошибках работы bower можно попробовать удалить ./ui/bower_components.
Инициализация yeoman завершена. Далее, можно переходить к обычному режиму работы:
  update/run/compile/и т.д.

Для создания/обновления idea-проекта нужно вызвать gen-idea.


Deploy
=====================================
Использовать ci.cbca.ru. Для ручного деплоя алгоритм примерно следующий:

sbt stage
cd target/universal/stage
rsync -avz -e ssh . www@osm01.suggest.io:sio2/sioweb21/

ssh www@osm01.suggest.io
screen -r sio2
<CTRL+C>
<UP>
<ENTER>


Changelog
======================================

2014.sep.30:
  Требуется imagemagic не ниже 6.8.9 из-за бага с png (черный фон вместо серого при convert).

2014.may.05:
  В сборочном окружении нужен stylus >= 0.40 (0.42+ например).

2014.apr.16:
  При запуске stage-билда на osmX, надо использовать команду типа этой:
  bin/sioweb21 -Dconfig.file=../application.conf -Dhttp.port=9001 -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=15666 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.local.only=false -Djava.rmi.server.hostname=10.0.0.101

2014.feb.06: Надо обновить настройки sbt согласно странице в wiki:
 http://wiki.cbca.ru/dokuwiki/doku.php/sbt

2014.jan.27: В связи с переездом на hadoop2, который использует protobuf-2.5, необходимо собрать на
 локалхосте и использовать snapshot-версию play. Для сборки play-2.3-SNAPSHOT на локалхосте необходимsioweb3
=====================================

