@(args: mpay.yaka.MYakaFormData)(implicit ctx: Context)

@* Рендер формы, отправляющей юзера в платежку яндекс-кассы. *@

@import ctx.messages
@import io.suggest.pay.yaka.YakaConst._
@import util.TplDataFormatUtil.formatPrice
@import lk.dsl.wkv._

@__input(k: String, v: Any) = {
  <input type="hidden" name="@k" value="@v"/>
}

<form method="POST" action="https://@if(args.isDemo){demo}money.yandex.ru/eshop.xml">

  @__input(SHOP_ID_FN,        args.shopId)
  @__input(SC_ID_FN,          args.scId)
  @__input(PERSON_ID_FN,      args.customerNumber)

  @_wkvTable() {

    @for(orderId <- args.orderNumber) {
      @_wkvRow() {
        @_wkvTd(true) {
          @messages("Order.number")
        }
        @_wkvTd(false) {
          @messages("_N")
          @orderId
          @__input(ORDER_ID_FN,     orderId)
        }
      }
    }

    @_wkvRow() {
      @_wkvTd(true) {
        @messages("Payment.method")
      }
      @_wkvTd(false) {
        @if(args.isDemo) {
          <strong>
            (@messages("Demo"))
          </strong>
        }
        @messages("Yandex.Kassa")
      }
    }

    @_wkvRow() {
      @_wkvTd(true) {
        @messages("Total.to.pay")
      }
      @_wkvTd(false) {
        <strong>
          @formatPrice( args )
        </strong>
        @__input(SUM_FN,      args.amount)
      }
    }

  }

  @for(email <- args.clientEmail) {
    @__input(CLIENT_EMAIL_FN, email)
  }

  @__input(SIO_NODE_ID_FN,    args.onNodeId)

  <input class="right-bar-price-widget_request-btn btn __major __size-L sm-large-button"
         type="submit"
         value="@messages("Pay")"
  />

</form>


