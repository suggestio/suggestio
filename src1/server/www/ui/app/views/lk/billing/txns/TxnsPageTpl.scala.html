@(args: mbill.ILkTxnsPageTplArgs)(implicit ctx: Context)

@* Страница с историей транзакций. *@

@import ctx._
@import util.TplDataFormatUtil._
@import datetime._
@import io.suggest.bill.TxnsListConstants._
@import lk.billing.billingBaseTpl

@billingBaseTpl(
  title         = messages("Transactions.history"),
  mnode         = args.mnode,
  rightCurrEl   = Some( BillingRightPanelLinks.RPL_TRANSACTIONS )
) {

  @defining( args.txns.size ) { txnsCount =>
    @if(txnsCount > 0) {

      @_TxnsTableTpl(id = Some(TXNS_CONTAINER_ID)) {
        @_TxnsListTpl(args)
      }

      @if(txnsCount >= args.txnsPerPage) {
        <div class="btn-w __size-M">
          <a class="btn __size-S __radial-major" id="@GET_MORE_TXNS_BTN_ID"
             href="@routes.LkBill2.txnsList(args.mnode.id.get, page = args.currPage + 1, inline = true)">@messages("Show.more")</a>
        </div>
      }

    } else {
      @messages("No.records").
    }
  }

  <input type="hidden" id="@ADN_ID_INPUT_ID" value="@args.mnode.id"/>
  <input type="hidden" id="@CURR_PAGE_NUM_INPUT_ID" value="@args.currPage"/>

  @helper.javascriptRouter("jsRoutes")(
    routes.javascript.LkBill2.txnsList
  )

}
