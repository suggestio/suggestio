@(args: madn.mapf.IAdnMapTplArgs)(implicit ctx: Context)

@* Форма размещения ADN-узла в точке на карте. *@

@import ctx.{messages, request}
@import helper._
@import util.FC.tdRadialFc
@import lk.adv.widgets._
@import io.suggest.adn.mapf.AdnMapFormConstants._
@import lk.dsl._
@import views.html.stuff.geo.maps._
@import views.html.stuff.geo._hiddenLatLonTpl
@import views.html.stuff._inputHiddenTpl

@form( CSRF(routes.LkAdnMap.forNodeSubmit(args.mnode.id.get)), 'id -> FORM_ID) {

  @_advSuTpl()


  @* Левая колонка. *@
  @_barTpl(MHands.Left) {
    @messages("You.can.place.adn.node.on.map.below")
  }


  @* Даты (период) размещения. *@
  @_barTpl(MHands.Right) {

    @_minorTitleTpl() {
      @messages("Date.choosing")
    }

    @period._contTpl() {
      @period._formTpl(
        args.form(Fields.PERIOD_FN),
        args.advPeriodsAvail
      )

      @for(v <- args.form.value) {
        @period._reportTpl(v.period)
      }
    }
  }


  @* Инпуты состояния карты. *@
  @_mapInputsStateTpl( args.form( Fields.STATE_FN ) )

  @* Поля точки, в которой должно произойти размещение узла. *@
  @_hiddenLatLonTpl(
    args.form( Fields.POINT_FN ),
    latId = Some( Point.INPUT_ID_LAT ),
    lonId = Some( Point.INPUT_ID_LON )
  )

  @* Поле для рендера сдвига временной зоны. *@
  @_inputHiddenTpl(
    args.form( Fields.TZ_OFFSET_FN ),
    id = Some( Fields.TZ_OFFSET_ID )
  )

}


