# This file defines all application routes (Higher priority routes first)

## Если path начинается с /~, то jsRevRouterTpl НЕ будет приписывать CSRF-токен к роуте.

## 2015.mar.04: Запрет доступа простых смертных к служебным ассетам, типа исходников и js-мапов. Внизу routes есть тоже самое для /assets/
GET  /vassets/$file<.+\.(src\.js|js\.map|scala|java|conf|-fastopt\.js).*>       @controllers.Static.vassetsSudo(path="/public", file: Asset)

## Map static resources from the /public folder to the /assets URL path
GET  /vassets/*file                     @controllers.Assets.versioned(path="/public", file: Asset)

## Home page
GET  /                                  @controllers.Sc.geoSite(a: msc.ScJsState ?= msc.ScJsState.veryEmpty, x: msc.SiteQsArgs ?= msc.SiteQsArgs.empty)

## "... most browsers of all types will request /favicon.ico by default" https://stackoverflow.com/a/1445016
## TODO Заменить на moved temporary + versioned-роута, чтобы усилить кэширование?
GET  /favicon.ico                       @controllers.Assets.at(path = "/public", file = "images/favicon/114.ico")

## sc3+ Объединённое API:
GET  /sc/api/pub                        @controllers.Sc.pubApi(a: io.suggest.sc.sc3.MScQs)

## Рендер ровно одной карточки.
GET  /sc/one/html                       @controllers.Sc.onlyOneAd(o: blk.OneAdQsArgs)
GET  /sc/one/img                        @controllers.Sc.onlyOneAdAsImage(o: blk.OneAdQsArgs)
## Этот path к js-роутеру захардкожен в сорцах sc-sjs SrvRouter, и его лучше не менять никогда вообще.
GET  /sc/router.js                      @controllers.Sc.scJsRouter
GET  /sc/routes/:c/router.js            @controllers.Sc.scJsRouterCache(c: Int)
GET  /sc/sc.webmanifest                 @controllers.Sc.webAppManifest(x: io.suggest.sc.pwa.MPwaManifestQs)

## Дамп ошибок выдачи.
POST /sc/error                          @controllers.Sc.handleScError

GET  /img/dyn                           @controllers.Img.dynImg(i: im.MImgT)

## Обслуживание около-статических ответов.
## Cross-Origin resource sharing: preflight request:
OPTIONS /*path                          @controllers.Static.corsPreflight(path)
GET  /robots.txt                        @controllers.Static.robotsTxt
GET  /sitemap.xml                       @controllers.Static.siteMapXml
GET  /ws/ch/:c                          @controllers.Static.wsChannel( c: io.suggest.ctx.MCtxId )

## Входы в личные кабинеты
GET  /lk/nodes                          @controllers.MarketLkAdn.lkList(fromNode: Option[String] ?= None)
GET  /lk/node/create                    @controllers.MarketLkAdn.createNode
POST /lk/node/create                    @controllers.MarketLkAdn.createNodeSubmit
GET  /lk/node/profile/:nodeId           @controllers.MarketLkAdn.showAdnNode(nodeId)

## Редактор ADN-узла: v2 react
GET  /lk/node/edit2/page/:nodeId        @controllers.LkAdnEdit.editNodePage(nodeId: MEsUuId)
POST /lk/node/edit2/img/up/:nodeId      @controllers.LkAdnEdit.uploadImg(nodeId: MEsUuId)
POST /lk/node/edit2/page/:nodeId        @controllers.LkAdnEdit.save(nodeId: MEsUuId)

## Управления карточками узла.
GET  /lk/mads/form/*nodeKey             @controllers.LkAds.adsPage(nodeKey: RcvrKey)
GET  /lk/mads/get/*nodeKey              @controllers.LkAds.getAds(nodeKey: RcvrKey, offset: Int, newAdId: Option[String] ?= None)

## Редактирования профиля юзера из личного кабинета узла.
GET  /lk/own/edit/:adnId                @controllers.MarketLkAdn.userProfileEdit(adnId, r: Option[String] ?= None)
POST /lk/own/pwchange/:adnId            @controllers.MarketLkAdn.changePasswordSubmit(adnId, r: Option[String] ?= None)

## Размещение рекламы на внешних сервисах
GET  /lk/xadv/ext/tg/write/:adnId       @controllers.LkAdvExt.writeTarget(adnId)
POST /lk/xadv/ext/tg/write/:adnId       @controllers.LkAdvExt.writeTargetSubmit(adnId)
GET  /ws/lk/xadv/ext/run                @controllers.LkAdvExt.wsRun(x: adv.MExtAdvQs)
POST /lk/xadv/ext/tg/delete/:tgId       @controllers.LkAdvExt.deleteTargetSubmit(tgId)
GET  /lk/xadv/ext/mad/:adId             @controllers.LkAdvExt.forAd(adId)
POST /lk/xadv/ext/mad/:adId             @controllers.LkAdvExt.forAdSubmit(adId)
GET  /lk/xadv/ext/runner/:adId          @controllers.LkAdvExt.runner(adId, x: Option[adv.MExtAdvQs])
GET  /lk/xadv/ext/oauth1/ret/:adnId     @controllers.LkAdvExt.oauth1PopupReturnGet(adnId, actorInfoQs: adv.ext.act.ActorPathQs)
POST /lk/xadv/ext/oauth1/ret/:adnId     @controllers.LkAdvExt.oauth1PopupReturnPost(adnId, actorInfoQs: adv.ext.act.ActorPathQs)

## Размещение в теге с учетом географии.
GET  /lk/xadv/geo/for/:adId             @controllers.LkAdvGeo.forAd(adId)
POST /lk/xadv/geo/for/:adId             @controllers.LkAdvGeo.forAdSubmit(adId)
POST /lk/xadv/geo/price/:adId           @controllers.LkAdvGeo.getPriceSubmit(adId)
POST /lk/xadv/geo/tag/add               @controllers.LkAdvGeo.tagEditorAddTag()
GET  /lk/xadv/geo/tag/tags              @controllers.LkAdvGeo.tagsSearch(s: mlk.MLkTagsSearchQs)
GET  /lk/xadv/geo/tag/tags2             @controllers.LkAdvGeo.tagsSearch2(s: mlk.MLkTagsSearchQs)
GET  /~/geo/map/rcvrs/:c/map.json       @controllers.Static.advRcvrsMapJson(c: Int)
GET  /lk/xadv/geo/map/rcvr/pop/:adId/:nodeId     @controllers.LkAdvGeo.rcvrMapPopup(adId: MEsUuId, nodeId: MEsUuId)
GET  /lk/xadv/geo/map/shapes/:adId      @controllers.LkAdvGeo.existGeoAdvsMap(adId)
GET  /lk/xadv/geo/map/shape/pop/:itemId @controllers.LkAdvGeo.existGeoAdvsShapePopup(itemId: Gid_t)
## Тут должен быть GET, но почему-то GET с бинарным телом не выходит из Ajax/XHR.

## ЛК: Редактор рекламных карточек v2:
GET  /lk/mad/new2/:nodeId               @controllers.LkAdEdit.createAd(nodeId: MEsUuId)
POST /lk/mad/save2                      @controllers.LkAdEdit.saveAdSubmit(mad: Option[MEsUuId] ?= None, prod: Option[MEsUuId] ?= None)
GET  /lk/mad/edit2/:adId                @controllers.LkAdEdit.editAd(adId: MEsUuId)
POST /lk/mad/up/img                     @controllers.LkAdEdit.prepareImgUpload(madId: Option[MEsUuId] ?= None, nodeId: Option[MEsUuId] ?= None)
POST /lk/mad/delete2/:adId              @controllers.LkAdEdit.deleteSubmit(adId: MEsUuId)

## ЛК: Управление под-узлами.
GET  /lk/subnodes/of/:nodeId                        @controllers.LkNodes.nodesOf(nodeId: MEsUuId)
GET  /lk/subnodes/info/:nodeId                      @controllers.LkNodes.nodeInfo(nodeId: String)
POST /lk/subnodes/create/:parentId                  @controllers.LkNodes.createSubNodeSubmit(parentId: String)
POST /lk/subnodes/enable/:nodeId/:enabled           @controllers.LkNodes.setNodeEnabled(nodeId: String, enabled: Boolean)
POST /lk/subnodes/delete/:nodeId                    @controllers.LkNodes.deleteNode(nodeId: String)
POST /lk/subnodes/edit/:nodeId                      @controllers.LkNodes.editNode(nodeId: String)
POST /lk/subnodes/madv/:adId/:isEnabled/*onNode     @controllers.LkNodes.setAdv(adId: MEsUuId, isEnabled: Boolean, onNode: RcvrKey)
GET  /lk/subnodes/mad/:adId                         @controllers.LkNodes.nodesForAd(adId: MEsUuId)
POST /lk/subnodes/tfd/*onNode                       @controllers.LkNodes.setTfDaily(onNode: RcvrKey)
POST /lk/subnodes/aso/:adId/:isEnabled/*onNode      @controllers.LkNodes.setAdvShowOpened(adId: MEsUuId, isEnabled: Boolean, onNode: RcvrKey)


## ЛК: Размещение ADN-узла на карте
POST /lk/adn/map/price/:nodeId          @controllers.LkAdnMap.getPriceSubmit(nodeId: MEsUuId)
GET  /lk/adn/map/:nodeId                @controllers.LkAdnMap.forNode(nodeId: MEsUuId)
POST /lk/adn/map/:nodeId                @controllers.LkAdnMap.forNodeSubmit(nodeId: MEsUuId)
GET  /lk/adn/current/:nodeId            @controllers.LkAdnMap.currentNodeGeoGj(nodeId: MEsUuId)
GET  /lk/adn/pop/item/:itemId           @controllers.LkAdnMap.currentGeoItemPopup( itemId: Gid_t )

## lk.bill2
GET  /lk/cart/:nodeId                   @controllers.LkBill2.cart(nodeId, r: Option[String] ?= None)
GET  /lk/cart2/:nodeId                  @controllers.LkBill2.cart2(nodeId, r: Option[String] ?= None)
POST /lk/items/del                      @controllers.LkBill2.deleteItems( i: QsbSeq[Gid_t] )
POST /lk/cart/:nodeId                   @controllers.LkBill2.cartSubmit(nodeId)
GET  /lk/bill/txns/:nodeId              @controllers.LkBill2.txnsList(nodeId, page: Int ?= 0, inline: Boolean ?= false)
GET  /lk/bill/:nodeId                   @controllers.LkBill2.onNode(nodeId)
GET  /lk/nai/:nodeId                    @controllers.LkBill2.nodeAdvInfo(nodeId, adId: Option[String] ?= None)
POST /lk/cart/clear/:nodeId             @controllers.LkBill2.cartClear(nodeId, r: Option[String] ?= None)
POST /lk/cart/item/del/:itemId          @controllers.LkBill2.cartDeleteItem(itemId: Gid_t, r: String)

GET  /lk/pay/thanks                     @controllers.LkBill2.thanksForBuy(onNodeId: String)
GET  /lk/orders/:onNodeId               @controllers.LkBill2.orders(onNodeId: MEsUuId, page: Int ?= 0)
GET  /lk/order2                         @controllers.LkBill2.getOrder(orderId: Option[Gid_t] ?= None)
GET  /lk/order/:onNodeId/:orderId       @controllers.LkBill2.showOrder(orderId: Gid_t, onNodeId: MEsUuId)

## lk pay systems
GET  /pay/yaka/order/:onNodeId/:orderId @controllers.pay.PayYaka.payForm(orderId: Gid_t, onNodeId: MEsUuId)
POST /pay/yaka/check                    @controllers.pay.PayYaka.check
POST /pay/yaka/payment                  @controllers.pay.PayYaka.payment
GET  /pay/yaka/success                  @controllers.pay.PayYaka.success(qs: mpay.yaka.MYakaReturnQs)
## Обработка ошибок нетривиальна: обычно GET + qs, но может быть и POST, может быть GET без нормальных параметров.
GET  /pay/yaka/fail                     @controllers.pay.PayYaka.fail(qs: mpay.yaka.MYakaReturnQs)
GET  /pay/yaka/fail                     @controllers.pay.PayYaka.failUnknown
POST /pay/yaka/fail                     @controllers.pay.PayYaka.failPostQs(qs: mpay.yaka.MYakaReturnQs)
GET  /pay/yaka/_fail                    @controllers.pay.PayYaka.failLoggedIn(orderId: Gid_t, onNodeId: MEsUuId)
## lk pay demos
GET  /demopay/yaka/order/:onNodeId/:orderId   @controllers.pay.PayYaka.demoPayForm(orderId: Gid_t, onNodeId: MEsUuId)
POST /demopay/yaka/check                @controllers.pay.PayYaka.demoCheck
POST /demopay/yaka/payment              @controllers.pay.PayYaka.demoPayment
GET  /demopay/yaka/success              @controllers.pay.PayYaka.demoSuccess(qs: mpay.yaka.MYakaReturnQs)
## Обработка ошибок нетривиальна: обычно GET + qs, но может быть и POST, может быть GET без нормальных параметров.
GET  /demopay/yaka/fail                 @controllers.pay.PayYaka.demoFail(qs: mpay.yaka.MYakaReturnQs)
GET  /demopay/yaka/fail                 @controllers.pay.PayYaka.demoFailUnknown
POST /demopay/yaka/fail                 @controllers.pay.PayYaka.demoFailPostQs(qs: mpay.yaka.MYakaReturnQs)

## Принятие приглашения на управления узлом.
GET  /lk/node/eact/:adnId/:eaId         @controllers.MarketLkAdn.nodeOwnerInviteAcceptForm(adnId, eaId)
POST /lk/node/eact/:adnId/:eaId         @controllers.MarketLkAdn.nodeOwnerInviteAcceptFormSubmit(adnId, eaId)

## Обращение в тех.поддерку зареганного клиента sio-market.
GET  /lk/h/support/at/:nodeId           @controllers.LkHelp.supportFormNode(nodeId, r: Option[String] ?= None)
POST /lk/h/support/at/:nodeId           @controllers.LkHelp.supportFormNodeSubmit(nodeId, r: Option[String] ?= None)
GET  /lk/h/support                      @controllers.LkHelp.supportForm(r: Option[String] ?= None)
POST /lk/h/support                      @controllers.LkHelp.supportFormSubmit(r: Option[String] ?= None)
POST /lk/h/geo/node/:adnId              @controllers.LkHelp.askGeo4NodeSubmit(adnId, r: Option[String] ?= None)
GET  /lk/h/about                        @controllers.LkHelp.companyAbout(nodeId: Option[String] ?= None)

## Языки и локализация
GET  /lang                              @controllers.LkLang.showLangSwitcher(r: Option[String] ?= None)
POST /lang                              @controllers.LkLang.selectLangSubmit(r: Option[String])
GET  /lang/:lang/:hash/messages.js      @controllers.LkLang.lkMessagesJs(lang: String, hash: Int)

## Генераторы капч
GET  /captcha/get/:captchaId            @controllers.Captcha.getCaptcha(captchaId, cp: String)
GET  /captcha/digital/:captchaId        @controllers.Captcha.getDigitalCaptcha(captchaId, cp: String)

## Upload controller
## TODO Запилить поддержку подписанных JSON-моделей в jsRoutes. Название параметра "c" пока захардкожено на клиенте в UploadApi.
POST /upload/file                       @controllers.Upload.doFileUpload(u: mup.MUploadTargetQs, c: Option[io.suggest.ctx.MCtxId] ?= None)
GET  /upload/_config                    @controllers.Upload.getConfig


## sys
GET  /sys                               @controllers.SysMarket.sysIndex
# sys.market
GET  /sys/market                        @controllers.SysMarket.index
# sys.market.adn
GET  /sys/market/adn/:adnId             @controllers.SysMarket.showAdnNode(adnId)
GET  /sys/market/adns                   @controllers.SysMarket.adnNodesList(w: msys.MSysNodeListArgs ?= msys.MSysNodeListArgs.default)
GET  /sys/market/create/adn             @controllers.SysMarket.createAdnNode()
POST /sys/market/create/adn             @controllers.SysMarket.createAdnNodeSubmit()
POST /sys/market/adn/:adnId/delete      @controllers.SysMarket.deleteAdnNodeSubmit(adnId)
GET  /sys/market/ads                    @controllers.SysMarket.showAdnNodeAds(a: io.suggest.sc.sc3.MScQs)
POST /sys/market/mad/rm/rcvr/:adId      @controllers.SysMarket.removeAdRcvr(adId, rcvrId: Option[String] ?= None, r: Option[String] ?= None)
GET  /sys/market/adn/edit/:adnId        @controllers.SysMarket.editAdnNode(adnId)
POST /sys/market/adn/edit/:adnId        @controllers.SysMarket.editAdnNodeSubmit(adnId)
# sys.market.mart
GET  /sys/market/adn/invite/:id         @controllers.SysMarket.nodeOwnerInviteForm(id: String)
POST /sys/market/adn/invite/:id         @controllers.SysMarket.nodeOwnerInviteFormSubmit(id: String)
GET  /sys/market/adn/invite/email/:id   @controllers.SysMarket.showNodeOwnerEmailInvite(id)
# sys.market.shop
GET  /sys/market/shop/eact/:id          @controllers.SysMarket.showEmailInviteMsg(id)
GET  /sys/market/mad/email/:adId        @controllers.SysMarket.showShopEmailAdDisableMsg(adId)

# sys.ad
GET  /sys/mad/:adId/show                @controllers.SysMarket.showAd(adId)
GET  /sys/mad/:adId/rcvrs/analyze       @controllers.SysMarket.analyzeAdRcvrs(adId)
POST /sys/mad/:adId/rcvrs/reset         @controllers.SysMarket.resetReceivers(adId, r: Option[String] ?= None)
POST /sys/mad/:adId/rcvrs/clean         @controllers.SysMarket.cleanReceivers(adId, r: Option[String] ?= None)
# sys.ad.render - диагностический рендер одиночных карточек в html и картинки.
GET  /sys/mad/:adId/one/render/:rvar    @controllers.SysMarket.showOneAdForm(adId, rvar: msc.OneAdRenderVariant)
POST /sys/mad/:adId/one/render/:rvar    @controllers.SysMarket.oneAdFormSubmit(adId, rvar: msc.OneAdRenderVariant)

## SmDomains - управлением доменами узла.
GET  /sys/node/domain/add/:nodeId       @controllers.SysMarket.createNodeDomain(nodeId)
POST /sys/node/domain/add/:nodeId       @controllers.SysMarket.createNodeDomainFormSubmit(nodeId)
GET  /sys/node/domain/edit/:nodeId/dkey @controllers.SysMarket.editNodeDomain(nodeId, dkey)
POST /sys/node/domain/edit/:nodeId/dkey @controllers.SysMarket.editNodeDomainFormSubmit(nodeId, dkey)
POST /sys/node/domain/del/:nodeId/dkey  @controllers.SysMarket.deleteNodeDomainFormSubmit(nodeId, dkey)

## SysNodeEdges: работа с эджами узлов
POST /sys/node/edge/del                 @controllers.SysMarket.deleteEdgePost(e: msys.MNodeEdgeIdQs)
GET  /sys/node/edge/add/:nodeId         @controllers.SysMarket.createEdgeGet(nodeId)
POST /sys/node/edge/add/:nodeId         @controllers.SysMarket.createEdgePost(nodeId)
GET  /sys/node/edge/edit                @controllers.SysMarket.editEdgeGet(e: msys.MNodeEdgeIdQs)
POST /sys/node/edge/edit                @controllers.SysMarket.editEdgePost(e: msys.MNodeEdgeIdQs)


## sys: Календари
GET  /sys/cal                            @controllers.SysCalendar.showCalendars
POST /sys/cal/new/tpl                    @controllers.SysCalendar.newCalendarFromTemplateSubmit
POST /sys/cal/new                        @controllers.SysCalendar.createCalendarSubmit
GET  /sys/cal/edit/:calId                @controllers.SysCalendar.editCalendar(calId)
POST /sys/cal/edit/:calId                @controllers.SysCalendar.editCalendarSubmit(calId)
GET  /sys/cal/get/:calId                 @controllers.SysCalendar.getCalendarXml(calId)

## sys: mdr - модерация контента
GET  /sys/mdr                            @controllers.SysMdr.index
GET  /sys/mdr/free/list                  @controllers.SysMdr.freeAdvs(a: mdr.MdrSearchArgs ?= mdr.MdrSearchArgs.default)
GET  /sys/mdr/free/refuse/popup/:adId    @controllers.SysMdr.refuseFreeAdvPopup(adId)
POST /sys/mdr/free/accept/:adId          @controllers.SysMdr.freeAdvMdrAccept(adId)
POST /sys/mdr/free/refuse/:adId          @controllers.SysMdr.freeAdvMdrBan(adId)
GET  /sys/mdr/node/:nodeId               @controllers.SysMdr.forAd(nodeId)
GET  /sys/mdr/item/refuse/:itemId        @controllers.SysMdr.refuseItemPopup(itemId: Gid_t)
POST /sys/mdr/item/approve/:itemId       @controllers.SysMdr.approveItemSubmit(itemId: Gid_t)
POST /sys/mdr/item/refuse/:itemId        @controllers.SysMdr.refuseItemSubmit(itemId: Gid_t)
GET  /sys/mdr/list/paid                  @controllers.SysMdr.paidAdvs(a: mdr.MdrSearchArgs ?= mdr.MdrSearchArgs.default)
GET  /sys/mdr/next                       @controllers.SysMdr.rdrToNextAd(a: mdr.MdrSearchArgs ?= mdr.MdrSearchArgs.default)
POST /sys/mdr/items/approve/:adId        @controllers.SysMdr.approveAllItemsSubmit(adId)
GET  /sys/mdr/items/refuse/:adId         @controllers.SysMdr.refuseAllItems(adId)
POST /sys/mdr/items/refuse/:adId         @controllers.SysMdr.refuseAllItemsSubmit(adId)
POST /sys/mdr/itemstype/approve/:adId    @controllers.SysMdr.approveAllItemsTypeSubmit(adId, itype: MItemType)
GET  /sys/mdr/itemstype/refuse/:adId     @controllers.SysMdr.refuseAllItemsType(adId, itype: MItemType)
POST /sys/mdr/itemstype/refuse/:adId     @controllers.SysMdr.refuseAllItemsTypeSubmit(adId, itype: MItemType)

## sys node geo
GET  /sys/adn/geo/all/:nodeId            @controllers.SysAdnGeo.forNode(nodeId)
## sys node geo shape
GET  /sys/adn/geo/add/osm/:nodeId        @controllers.SysAdnGeo.createForNodeOsm(nodeId)
POST /sys/adn/geo/add/osm/:nodeId        @controllers.SysAdnGeo.createForNodeOsmSubmit(nodeId)
POST /sys/adn/geo/delete                 @controllers.SysAdnGeo.deleteSubmit(g: mgeo.MGsPtr)
GET  /sys/adn/geo/edit/osm               @controllers.SysAdnGeo.editNodeOsm(g: mgeo.MGsPtr)
POST /sys/adn/geo/edit/osm               @controllers.SysAdnGeo.editNodeOsmSubmit(g: mgeo.MGsPtr)
GET  /sys/adn/geo/add/circl/:nodeId      @controllers.SysAdnGeo.createCircle(nodeId)
POST /sys/adn/geo/add/circl/:nodeId      @controllers.SysAdnGeo.createCircleSubmit(nodeId)
GET  /sys/adn/geo/edit/circl             @controllers.SysAdnGeo.editCircle(g: mgeo.MGsPtr)
POST /sys/adn/geo/edit/circl             @controllers.SysAdnGeo.editCircleSubmit(g: mgeo.MGsPtr)
GET  /sys/adn/geo/json                   @controllers.SysAdnGeo.showGeoJson(g: mgeo.MGsPtr)

## Карта umap
GET  /sys/umap/nodes                     @controllers.Umap.getAdnNodesMap
GET  /sys/umap/nodes/datalayer           @controllers.Umap.getDataLayerGeoJson(ngl: io.suggest.geo.MNodeGeoLevel)
POST /sys/umap/nodes/settings            @controllers.Umap.saveMapSettingsSubmit
POST /sys/umap/nodes/datalayer           @controllers.Umap.saveMapDataLayer(ngl: io.suggest.geo.MNodeGeoLevel)
POST /sys/umap/nodes/datalayer/new       @controllers.Umap.createMapDataLayer
GET  /sys/umap/node/:adnId               @controllers.Umap.getAdnNodeMap(adnId)
GET  /sys/umap/node/:adnId/datalayer     @controllers.Umap.getDataLayerNodeGeoJson(adnId, ngl: io.suggest.geo.MNodeGeoLevel)
POST /sys/umap/node/:adnId/datalayer     @controllers.Umap.saveNodeDataLayer(adnId, ngl: io.suggest.geo.MNodeGeoLevel)

## sys/Картинки
GET  /sys/img                            @controllers.SysImg.index(q: Option[String] ?= None)
POST /sys/img/search                     @controllers.SysImg.searchFormSubmit
GET  /sys/img/show                       @controllers.SysImg.showOne(i: im.MImgT)
POST /sys/img/delete                     @controllers.SysImg.deleteOneSubmit(i: im.MImgT)
## sys.img.make
GET  /sys/img/make                       @controllers.SysImg.makeForm(i: im.MImgT, bm: Option[io.suggest.ad.blk.BlockMeta] ?= None)
POST /sys/img/make                       @controllers.SysImg.makeFormSubmit(i: im.MImgT)

## sys/AI
GET  /sys/ai                             @controllers.SysAi.index
GET  /sys/ai/mad                         @controllers.SysAi.madIndex
GET  /sys/ai/mad/create                  @controllers.SysAi.createMadAi
POST /sys/ai/mad/create                  @controllers.SysAi.createMadAiSubmit
GET  /sys/ai/mad/edit/:id                @controllers.SysAi.editMadAi(id)
POST /sys/ai/mad/edit/:id                @controllers.SysAi.editMadAiSubmit(id)
POST /sys/ai/mad/run/:id                 @controllers.SysAi.runMadAi(id)
POST /sys/ai/mad/delete/:id              @controllers.SysAi.deleteMadAi(id)

## sys.adn.install
GET  /sys/adn/inst/mads/:adnId           @controllers.SysMarket.installDfltMads(adnId)
POST /sys/adn/inst/mads/:adnId           @controllers.SysMarket.installDfltMadsSubmit(adnId)

## sys/person
GET  /sys/person                         @controllers.SysPerson.index
GET  /sys/person/reg/email/show          @controllers.SysPerson.showRegEmail
GET  /sys/person/recover/email/show      @controllers.SysPerson.showRecoverEmail
GET  /sys/person/show/:personId          @controllers.SysPerson.showPerson(personId)
GET  /sys/person/epws                    @controllers.SysPerson.allEpws(offset: Int ?= 0)
GET  /sys/person/extids                  @controllers.SysPerson.allExtIdents(offset: Int ?= 0)


## sys/billing v2 -- Весь новый биллинг разом в этом контроллере.
GET  /sys/bill/node/:nodeId              @controllers.SysBilling.forNode(nodeId)
## посуточные тарифы
GET  /sys/bill/tf/daily/:nodeId          @controllers.SysBilling.editNodeTfDaily(nodeId)
POST /sys/bill/tf/daily/:nodeId          @controllers.SysBilling.editNodeTfDailySubmit(nodeId)
POST /sys/bill/tf/daily/del/:nodeId      @controllers.SysBilling.deleteNodeTfDaily(nodeId)
## контракты v2
GET  /sys/bill/contract/new/:nodeId      @controllers.SysBilling.createContract(nodeId)
POST /sys/bill/contract/new/:nodeId      @controllers.SysBilling.createContractSubmit(nodeId)
GET  /sys/bill/contract/edit/:nodeId     @controllers.SysBilling.editContract(nodeId)
POST /sys/bill/contract/edit/:nodeId     @controllers.SysBilling.editContractSubmit(nodeId)
POST /sys/bill/contract/delete/:nodeId   @controllers.SysBilling.deleteContractSubmit(nodeId)
## Балансы v2
GET  /sys/bill/payment/:nodeId           @controllers.SysBilling.payment(nodeId)
POST /sys/bill/payment/:nodeId           @controllers.SysBilling.paymentSubmit(nodeId)
## Обзор системы балансов v2
GET  /sys/bill                           @controllers.SysBilling.overview


## sys/debug
GET  /sys/debug                          @controllers.SysDebug.index
POST /sys/debug/adv/rcvrs/reset          @controllers.SysDebug.resetAllRcvrs
POST /sys/debug/dynimg/jdedges/reset     @controllers.SysDebug.resetImgsToOrig
POST /sys/debug/dynimg/derivatives/del   @controllers.SysDebug.deleteAllDynImgDerivatives

## ident: логины/логауты
GET  /id                                @controllers.Ident.mySioStartPage(r: Option[String] ?= None)
GET  /id/epw/login                      @controllers.Ident.emailPwLoginForm(r: Option[String] ?= None)
POST /id/epw/login                      @controllers.Ident.emailPwLoginFormSubmit(r: Option[String] ?= None)
GET  /id/logout                         @controllers.Ident.logout
## ident: Восстановление пароля.
GET  /id/epw/recover                    @controllers.Ident.recoverPwForm
POST /id/epw/recover                    @controllers.Ident.recoverPwFormSubmit
GET  /id/epw/recover/sent               @controllers.Ident.recoverPwAccepted(email: String)
GET  /id/epw/resetpw/:eActId            @controllers.Ident.recoverPwReturn(eActId)
POST /id/epw/resetpw/:eActId            @controllers.Ident.pwResetSubmit(eActId)
## ident: Сменить пароль
GET  /id/epw/chpw                       @controllers.Ident.changePassword
POST /id/epw/chpw                       @controllers.Ident.changePasswordSubmit(r: Option[String] ?= None)
GET  /id/rdr/me/somewhere               @controllers.Ident.rdrUserSomewhere
## ident: рега по email и паролю
GET  /id/epw/reg                        @controllers.Ident.emailReg
POST /id/epw/reg                        @controllers.Ident.emailRegSubmit
GET  /id/epw/reg/return                 @controllers.Ident.emailReturn(e: usr.IEaEmailId)
POST /id/epw/reg/return                 @controllers.Ident.emailConfirmSubmit(e: usr.IEaEmailId)
## ident: вход через внешнего провайдера
GET  /id/via/:provider			        @controllers.Ident.idViaProvider(provider: mext.ILoginProvider, r: Option[String] ?= None)
POST /id/via/:provider                  @controllers.Ident.idViaProviderByPost(provider: mext.ILoginProvider, r: Option[String] ?= None)
GET  /id/reg/ext/confirm                @controllers.Ident.idpConfirm
POST /id/reg/ext/confirm                @controllers.Ident.idpConfirmSubmit

## compat
GET  /app/session/keepalive             @controllers.Static.keepAliveSession
## Раньше был пункт меню "О проекте". Теперь редирект на буклет маркета.
GET  /privacy                           @controllers.Static.privacyPolicy
GET  /st/popup/check                    @controllers.Static.popupCheckContent
POST /_/csp/report                      @controllers.Static.handleCspReport

## yeoman-play
#GET     /ui         com.tuplejump.playYeoman.Yeoman.index
#->	     /ui/	     yeoman.Routes
#GET     /           com.tuplejump.playYeoman.Yeoman.redirectRoot(base="/ui/")

## Редкие обращения к ассетам напрямую. На момент перемещения вниз, это использовалось только в одном редком месте в коде.
GET  /assets/$file<.+\.(src\.js|js\.map|scala|java|conf|-fastopt\.js).*>       @controllers.Static.assetsSudo(path="/public", file: Asset)
GET  /assets/*file                      @controllers.Assets.at(path="/public", file)

