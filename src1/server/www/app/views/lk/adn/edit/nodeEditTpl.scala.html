@(args: mlk.INodeEditArgs)(implicit ctx: Context)

@* Рендер страницы редактирования узла, имеющего высокий статус, т.е. супервизора или ресивера. *@
@import ctx._
@import lk.popup._
@import lk.adn._
@import io.suggest.js.JsRoutesConst

@popupContent = {

  @* Этот попап появляется при щелчке на знак вопроса где-то внизу формы редактора.
     Его контент надо вынести на отдельную страницу. *@
  @_popupTpl(attrs = Seq("id" -> "editHelp")) {
    @_popupHdrTpl() {
      @_popupCloseBtnTpl( href = Some(ctx.request.path) )
    }
    <h2 class="colors-help_t">
      @Html( messages("Info.about.D0.choosing.color.solution", "<br/>") )
    </h2>
    <div class="colors-help_cnt">
      <span class="colors-help_icons-text">
        @Html( messages("Color.of.text.and.icons", "<br/>") )
      </span>
      <span class="colors-help_background-text">
        @Html( messages("Color.of.bg.and.caption", "<br/>") )
      </span>
    </div>
    <p class="colors-help_descr">
      @Html( messages("Use.contrast.colors.hint", "<br/>") )
    </p>
  }

}


@rightBarAfter = {
  <div class="right-bar_bottom">
    <a class="btn __size-M __major js-submit-btn" data-for="#profileEdit">@messages("Save")</a>
  </div>
}

@headAfter = {
  <link rel="stylesheet" type="text/css" href='@routes.Assets.versioned("javascripts/lib/colorpicker/css/colorpicker.css")'/>
}

@nodeBaseTpl(
  title         = messages("Edit.profile"),
  mnode         = args.mnode,
  rightCurrEl   = NodeRightPanelLinks.RPL_NODE_EDIT,
  rightBarAfter = Some(rightBarAfter),
  popupContent  = Some(popupContent),
  headAfter     = Some(headAfter)
) {

  @_leaderNodeFormTpl(
    args          = args,
    btnText       = messages("Save"),
    submitCall    = routes.MarketLkAdnEdit.editAdnNodeSubmit(args.mnode.id.get)
  )

  @helper.javascriptRouter( JsRoutesConst.GLOBAL_NAME )(
    routes.javascript.Img.imgCropForm
  )

  <script src="@routes.Assets.versioned("javascripts/lib/colorpicker/js/colorpicker.js")"></script>
}
