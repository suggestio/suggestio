@(args: mbill.ICartTplArgs)(implicit ctx: Context)

@* Шаблон с корзиной. *@

@import lk.billing.billingBaseTpl
@import ctx.{request, messages}
@import util.TplDataFormatUtil.formatPrice
@import lk.lkwdgts.price._
@import helper._
@import io.suggest.bill.cart.CartConstants._

@billingBaseTpl(
  title       = messages("Cart"),
  mnode       = args.mnode,
  rightCurrEl = Some( BillingRightPanelLinks.RPL_CART ),
  rightAfter  = args.itemNodes
    .headOption
    .map { _ => _rightPriceTpl(args.totalPricing, formId = FORM_ID) }
) {

  @if( args.itemNodes.isEmpty ) {

    <h2>@messages("Your.cart.is.empty").</h2>

    @*for( mnodeId <- args.mnode.id ) {
      <a href="@routes.LkAds.adsPage(mnodeId :: Nil)">
        @messages("Return.to.my.ads")
      </a>
    }*@

  } else {

    @* Есть item'ы, рендерим таблицу item'ов. *@
    @_ItemsTpl(args, withDelete = true, withStatus = false)

  }

  <br/>
  <br/>

  @for(r <- args.r) {
    <a class="btn __size-M f-left __minor" href="@r">@messages("Go.back")</a>
  }

  @* Форма для возможности сабмита. *@
  @form( CSRF(routes.LkBill2.cartSubmit(args.mnode.id.get)), 'id -> FORM_ID ) {
    &nbsp;
  }

}
