@(orderIdOpt: Option[Gid_t], mnode: MNode, formStateB64: String)(implicit ctx: Context)

@* Шаблон для react-компонента cart-page. *@

@import lk.billing.billingBaseTpl
@import ctx.messages
@import lk.lkwdgts.price._rightPriceContTpl
@import io.suggest.bill.cart.CartConstants.FORM_ID
@import io.suggest.adv.AdvConstants
@import lk.lkwdgts._formStateInputTpl
@import io.suggest.i18n.MsgCodes
@import views.html.stuff.{jsTpl2HtmlTpl, _preLoaderLkTpl}
@import views.js.stuff.jsRevRouterTpl

@billingBaseTpl(
  title       = orderIdOpt.fold( messages(MsgCodes.`Cart`) )( messages(MsgCodes.`Order.N`, _) ),
  mnode       = mnode,
  rightCurrEl = Some( BillingRightPanelLinks.RPL_CART ),
  rightAfter  = Some( _rightPriceContTpl()() )
) {

  @_formStateInputTpl( formStateB64 )

  @* Контейнер для react-формы корзины. *@
  <div id="@FORM_ID">
    @_preLoaderLkTpl()
  </div>

  @jsTpl2HtmlTpl( withScriptTag = true )(
    jsRevRouterTpl( csrfAll = true, cdn = false )(
      routes.javascript.LkBill2.getOrder,
      routes.javascript.LkBill2.deleteItems,
      routes.javascript.LkBill2.cartSubmit
    )
  )

}
