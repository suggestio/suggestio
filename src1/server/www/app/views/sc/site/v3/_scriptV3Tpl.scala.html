@(args: msc.MSc3ScriptRenderArgs)(implicit ctx: Context)

@* HTML для подключения скрипта второй версии выдачи (sc-sjs). *@

@import views.html.stuff._
@import views.html.stuff.mapbox._
@import ctx.api.cdn
@import io.suggest.sc.ScConstants.JsRouter.DOM_ID
@import io.suggest.sc.ScConstants.Layout
@import lk.lkwdgts._formStateInputTpl
@import stuff.geo.maps._

@_formStateInputTpl( args.state0 )

<div id="@Layout.ROOT_ID">
</div>

@* id-атрибут у script-тега нарушает HTML-валидацию, но это плевать. *@
<script id="@DOM_ID" type="text/javascript" async
        src="@cdn.forCall( routes.Sc.scJsRouterCache(args.cacheHashCode) )">
</script>

@* Рендер jsMessages прямо тут. *@
@jsTpl2HtmlTpl( withScriptTag = true )( args.jsMessagesJs )

@_sjsScript("sc3-sjs")

@* Рендерим маркеры, необходимые гео-карте. *@
@_mapMarkersContTpl() {

  @* Нужен pin-маркер для marker-cluster. *@
  @_mapMarkersPinTpl()

}
