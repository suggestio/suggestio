@(ef: Form[MEdge], submitCall: Call, btnText: String)(implicit ctx: Context)

@* Верстка sys-формы создания/редактирования одного эджа. *@

@import helper._
@import ctx.{request, messages}
@import io.suggest.n2.edge.{MEdge, MPredicates}

@form( CSRF(submitCall) ) {

  @select(
    ef("predicate"),
    options = MPredicates.values
      .iterator
      .map { p =>
        p.value -> messages(p.singular)
      }
      .toSeq,
    Symbol("_label") -> messages("Predicate")
  )

  @textarea(
    ef("nodeIds"),
    Symbol("_label") -> "Список id узлов, через запятую."
  )

  @inputText(
    ef("order"),
    Symbol("_label") -> "Целое число для сортировки, если требуется."
  )


  @defining( ef("info") ) { eif =>

    @textarea(
      eif("dynImgArgs"),
      Symbol("_label") -> "Операции над изображением, если есть."
    )

    @textarea(
      eif("commentNi"),
      Symbol("_label") -> "Хэш-пароля или иной неидексируемый текст при эдже. Использовать как временный служебный комментарий можно, но небезопасно."
    )

    @select(
      eif("flag"),
      options = ("" -> "пусто") :: Iterator(true, false).map(_.toString).map(b => b -> b).toList,
      Symbol("_label") -> "Абстрактный флаг, если есть."
    )

    @textarea(
      eif("tags"),
      Symbol("_label") -> "Список названий тегов, через запятую."
    )

  }

  <p>[Остальные функции пока не реализованы]</p>

  <div class="btn-w __size-M">
    <input class="siom-ac-btn __color-1 __size-M __ft-XM f-right" value="@btnText" type="submit" />
  </div>

}
