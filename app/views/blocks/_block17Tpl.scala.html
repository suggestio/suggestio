@(mad: MAdT, isStandalone: Boolean)(implicit ctx: util.Context)

@import svg._
@import util.blocks.BlocksConf.Block17
@import util.TplDataFormatUtil._

<div class="sm-block height-@mad.blockMeta.height sio-mart__single-offer sm-block-tpl17" data-width="300" data-height="@mad.blockMeta.height" data-mad-id="@mad.id">

  @defining( mad.colors.getOrElse(Block17.bgColorBf.name, Block17.bgColorBf.anyDefaultValue) ) { bgColor =>
    @_circles17(
      cssClass = "bg",
      fillColor = mad.colors.getOrElse(Block17.circleFillColorBf.name, Block17.circleFillColorBf.anyDefaultValue),
      bgColor = bgColor
    )

    @_saleIcon13Tpl(
      cssClass = "svg",
      fillColor = mad.colors.getOrElse(Block17.saleIconColorBf.name, Block17.saleIconColorBf.anyDefaultValue)
    )

    @_saleIconMask13Tpl(
      cssClass = "svg-mask",
      fillColor = mad.colors.getOrElse(Block17.saleIconMaskColorBf.name, Block17.saleIconMaskColorBf.anyDefaultValue)
    )

    @mad.offers.headOption.map { offer =>
      <div class="inner" style="background: #@bgColor;">

        <img class="photo" src="@mad.imgs.get(Block17.BG_IMG_FN).map(_.filename).map(routes.Img.getImg).getOrElse(routes.Assets.at("images/market/blocks/tpl17-bg.jpg"))" />

        @offer.text1.map { text1 =>
          <div class="title" style="color: #@text1.font.color">
            @Html(text1.value)
          </div>
        }
      </div>

      @offer.discount.map { discount =>
        <div class="sale" style="color: #@discount.font.color">
          @formatPercentRaw(discount.value)<span>%</span>
        </div>
      }
    } @* offer *@

  }

</div>
