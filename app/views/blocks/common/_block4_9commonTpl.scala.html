@(mad: MAdT, isStandalone: Boolean, bc: CommonBlock4_9)(implicit ctx: Context)

@import util.TplDataFormatUtil._

<div class="sm-block height-@mad.blockMeta.height sio-mart__single-offer sm-block-tpl@bc.id" data-width="@bc.blockWidth" data-height="@mad.blockMeta.height" data-mad-id="@mad.id">

  <img class="bg" src="@mad.imgs.get(bc.BG_IMG_FN).map(_.filename).map(routes.Img.getImg).getOrElse(routes.Assets.at("images/market/blocks/tpl4-bg.jpg"))" alt=""/>

  <div class="inner" style="border-color: #@mad.colors.getOrElse(bc.borderColorBf.name, bc.borderColorBf.anyDefaultValue);"></div>

  @defining( mad.colors.getOrElse(bc.bgColorBf.name, bc.bgColorBf.anyDefaultValue) ) { color =>
  <div class="info" style="background: rgba(@{colorHex2rgb(color).mkString(",")}, 0.7);">
    @mad.offers.headOption.map { offer =>
      @offer.text1.map { title =>
        <div @_aovfStyleTpl(title, "title")>@Html(title.value)</div>
      }
      @offer.price.map { price =>
        <div @_aovfStyleTpl(price, "price")>@formatPriceDigits(price.value)@formatCurrency(price.currency)</div>
      }
      @offer.text2.map { descr =>
        <div @_aovfStyleTpl(descr, "descr")>@Html(descr.value)</div>
      }
    }
  </div>
  }

</div>
