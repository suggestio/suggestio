@(mad: MAdT, args: BlockRenderArgs, bc: util.blocks.BlocksConf.CommonBlock17_18)(implicit ctx: Context)

@import blocks.svg._
@import util.TplDataFormatUtil._
@import BSvgColorNames._

@blockBase(args, mad, bc) {

  @defining( mad.colors.getOrElse(bc.bgColorBf.name, bc.bgColorBf.anyDefaultValue) ) { bgColor =>

    @defining( mad.colors.getOrElse(bc.circleFillColorBf.name, bc.circleFillColorBf.anyDefaultValue) ) { fillColor =>
      <img class="bg" alt=""
           src="@routes.MarketShowcase.blockSvg(BlocksSvg.circles17, Map(Fill -> fillColor, Bg -> bgColor))"/>
    }

    @defining( mad.colors.getOrElse(bc.discoIconColorBf.name, bc.discoIconColorBf.anyDefaultValue) ) { diColor =>
      <img class="svg" alt="" src="@routes.MarketShowcase.blockSvg(BlocksSvg.saleIcon13, Map(Fill -> diColor))" />
    }

    @defining( mad.colors.getOrElse(bc.discoBorderColorBf.name, bc.discoBorderColorBf.anyDefaultValue) ) { dbColor =>
      <img class="svg-mask" alt="" src="@routes.MarketShowcase.blockSvg(BlocksSvg.saleIconMask13, Map(Fill -> dbColor))" />
    }

    @mad.offers.headOption.map { offer =>
      <div class="inner" style="background: #@bgColor;">

        @bgImgTpl(mad, bc,
          cssClass = Some("photo"),
          dfltImg = Some("images/market/blocks/tpl17-bg.jpg")
        )

        @offer.text1.map { text1 =>
          <div @_aovfStyleTpl(text1, bc.titleBf, "title")>
            @Html(text1.value)
          </div>
        }
      </div>

      @offer.discount.map { discount =>
        <div @_aovfStyleTpl(discount, bc.discountBf, "sale")>
          @formatPercentRaw(discount.value)<span>%</span>
        </div>
      }
    } @* offer *@

  }

}
