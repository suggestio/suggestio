@(mad: MAdT, isStandalone: Boolean)(implicit ctx: util.Context)

@* Первый блок верстки. *@
@import ctx._
@import util.blocks.BlocksUtil._
@import util.blocks.BlocksConf.Block1
@import util.TplDataFormatUtil._
@import common._

@blockBase(isStandalone) {

    <div class="sm-block height-@mad.blockMeta.height sio-mart__single-offer sm-block-tpl1" data-width="300" data-height="@mad.blockMeta.height" data-mad-id="@mad.id">

      <img class="bg" src="@mad.imgs.get(Block1.BG_IMG_FN).map(_.filename).map(routes.Img.getImg).getOrElse(routes.Assets.at("images/block-ad-sample-image.jpg"))" alt="SALE"/>

      @mad.offers.headOption.map { offer =>
          @offer.text1.map { title =>
            <div class="js-mvbl" data-connected-input="ad.offer.title" style="position: absolute; @title.coords.map { coords =>
              left: @(coords.x)px; top:@(coords.y)px;
            }.getOrElse{ left: 12px; top: 24px; }">
              <div @_aovfStyleTpl(title, "title")>@Html(title.value)</div>
            </div>
          }

          @offer.text2.map { descr =>
            <div class="js-mvbl" data-connected-input="ad.offer.descr" style="position: absolute; @descr.coords.map { coords =>
              left: @(coords.x)px; top:@(coords.y)px;
            }.getOrElse{ left: 12px; top: 24px; }">
              <div @_aovfStyleTpl(descr, "description")>@Html(descr.value)</div>
            </div>
          }

          @offer.oldPrice.map { oldPrice =>
            <div class="js-mvbl" data-connected-input="ad.offer.oldPrice" style="position: absolute; @oldPrice.coords.map { coords =>
              left: @(coords.x)px; top:@(coords.y)px;
            }.getOrElse{ left: 12px; top: 68px; }">
              <div @_aovfStyleTpl(oldPrice, "old-price")>@formatPrice(oldPrice.value, oldPrice.currency)</div>
            </div>
          }
          @offer.price.map { price =>
            <div class="js-mvbl" data-connected-input="ad.offer.price" style="position: absolute; @price.coords.map { coords =>
              left: @(coords.x)px; top:@(coords.y)px;
            }.getOrElse{ left: 12px; top: 108px; }">
            <div @_aovfStyleTpl(price, "price")>@formatPrice(price.value, price.currency)</div>
            </div>
          }
        }

    </div>

}
