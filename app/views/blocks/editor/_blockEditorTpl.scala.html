@(af: Form[_])(implicit ctx: Context)

@import util.blocks._

@defining( "ad.offer." ) { nameBase =>
@defining( BlocksConf(af("ad.offer.blockId").value.map(_.toInt).getOrElse(1)) ) { bc =>
  <div class="preview-wrap">

    <div class="block-editor">
      <div class="block-preview" id="blockPreviewContainer">
        @bc.renderEditorPreview(af, nameBase)
      </div>
    </div>
  </div>
  <div class="controls">
    <div class="block-editor-form">

      <div id="blockEditorForm">
        @for(bf <- bc.blockFields) {
          @bf.renderEditorField(
            formField = af(nameBase + bf.name),
            bc = bc
          )
          <div class="clear"></div>
        }

        <input type="hidden" name="ad.offer.blockId" value="@bc.id">

      </div>
    </div>
  </div>
}
}
