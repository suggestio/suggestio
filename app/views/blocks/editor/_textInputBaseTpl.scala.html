@(bf: BlockAOValueFieldT, bc: BlockConf, bfNameBase: String, af: Form[_], colorWithLabel: Boolean = false)(content: Html)(implicit ctx: Context)

@* Поле для ввода текста: input или textarea в зависимости от обстоятельств. *@
@import ctx._
@import helper._
@import models.blk._


<div class="lk-field-w-tools">


  @if( bf.withFontColor ) {
    <div class="lk-field-w-tools__tools lk-field-tools">
      <div class="lk-field-tools__inner">

        @if( bf.withFontFamily ) {
          @defining( bfNameBase + ".font.family") { ffname =>
            <div class="lk-field-tools__editor">
              <select name="@ffname" class="js-custom-font-family-select">
                @defining( af(ffname) ) { ff =>
                  @Fonts.values.iterator.zipWithIndex.map { case (font, i) =>
                    <option value="@font.fileName" @if( ff.value.exists(_ == font.fileName) ){selected="selected"}>@font.descr</option>
                  }
                }
              </select>
            </div>
          }
        }

        @if( bf.withFontSize ) {
          @_fontSizeSelectTpl(bf, bfNameBase, af)
        }

        @* Выравнивание текста. Допустимые значения: l/left/r/right/j/justify/c/center. *@
        @if( bf.withTextAlign ) {
          @defining(bfNameBase + ".font.align") { aname =>
          <div class="lk-field-tools__editor lk-field-tools__editor_align-editor align-editor js-align-editor">
            <div class="align-editor__button align-editor__button_left js-ae-button"  data-align="left"></div>
            <div class="align-editor__button align-editor__button_center js-ae-button" data-align="center"></div>
            <div class="align-editor__button align-editor__button_right js-ae-button" data-align="right"></div>
            <input type="hidden" name="@aname" value="@af(aname).value"/>
          </div>
          }
        }

        @_colorBtnTpl(
          colorField = af(bfNameBase + ".font.color"),
          default    = bf.defaultValue.map(_.font.color),
          withLabel  = false,
          className = "lk-field-tools__editor"
        )

        @* Скрытое поле *@
        @if( bf.withCoords ) {
          @defining( bfNameBase + ".coords.x" ) { xname =>
            <input type="hidden" name="@xname" value="@af(xname).value"/>
          }
          @defining( bfNameBase + ".coords.y" ) { yname =>
            <input type="hidden" name="@yname" value="@af(yname).value"/>
          }
        }
      </div>
    </div>
  }

  <div class="lk-field-w-tools__field">@content</div>

</div>