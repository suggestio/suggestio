@(ng: Map[AdNetMemberType, Seq[MAdnNode]], martsMap: Map[String, MAdnNode])(implicit ctx: util.Context)

@* Список личных кабинетов юзера. *@
@import AdNetMemberTypes._

@lkBase("Моя рекламная сеть") {

  <div class="title-wrap">
    <div class="center">
      <div class="title-inner">
        ВЫБОР МАГАЗИНА
      </div>
    </div>
  </div>

  <div class="body">

    @* Обработка карты сделана через partial-функцию, чтобы при добавлении новых типов компилятор автоматом
       выдавал warning при сборке. *@
    @ng.map {
      case (MART | RESTAURANT | RESTAURANT_SUP, adnNodes) => {
        <div class="lk-list">

          @adnNodes.zipWithIndex.map { case (adnNode, i) =>

            <a href="@routes.MarketLkAdn.showAdnNode(adnNode.id.get)" class="item">
              <span class="number">@(i+1)</span>
              <span class="name">@adnNode.meta.name</span>
            </a>
          }

        </div>
      }

      case (SHOP, mshops) => {
        <div class="lk-list">
          @mshops.zipWithIndex.map { case (mshop, i) =>

            <a href="@routes.MarketLkAdn.showAdnNode(mshop.id.get)" class="item">
              <span class="number">@(i+1)</span>
              <span class="name">@mshop.meta.name</span>
              @mshop.adn.supId.flatMap(martsMap.get).map { mmart =>
                <span class="mmart-name">&nbsp;/&nbsp;@mmart.meta.name</span>
              }

            </a>
            <div class="border-line"></div>
          }
        </div>

      }
    }
  </div>

}
