@(adnNode: MAdnNode, eAct: EmailActivation, iaf: Form[_], withOfferText: Boolean)(implicit ctx: util.Context)

@* Страница с формой подтверждения регистрации в качестве управляющего узлом ADN.
   Новый пользователь здесь может ввести пароль. Уже залогиненный - просто подтвердить себя. *@
@import helper._
@import market.contract._
@import ctx._

@table_fieldset(label:String, clazz:String)(input:Html) = {
<table class="input-w __size-L @clazz">
  <td class="input-w_left">
    <label class="input-w_prop-name" for="adnNodeName">@label</label>
  </td>

  <td>
    <div class="input clearfix">
      <div class="input_shadow">
        @input
      </div>

    </div>
  </td>
</table>
}

@market.lk.lkBase(
  title = "Подтверждение регистрации",
  nodeOpt = Some(adnNode)
) {

  <div class="page-title">
    <div class="page-title_cnt">
        ПОДТВЕРЖДЕНИЕ РЕГИСТРАЦИИ
    </div>
  </div>

  <div class="body_cnt">
    <div class="success-label success-label__adn-invite-accept">
      <div class="success-label__icon"></div>
      <div class="success-label__title">Вы приглашены к участию в системе Sio.Market</div>
    </div>

    @form( routes.MarketLkAdn.nodeOwnerInviteAcceptFormSubmit(adnNode.id.get, eAct.id.get) ) {
      @* Рендер текста открытой оферты. *@
      @if(withOfferText) {
        @market.contract._inviteWidgetTpl(iaf)
      }

      @table_fieldset(Messages("amt.of.type." + adnNode.adn.shownTypeId) + ":", "__disabled"){
        <input id="adnNodeName" type="text" disabled value="@adnNode.meta.name"/>
      }

      @table_fieldset("E-mail:", "__disabled"){
        <input id="adnNodeEmail" type="text" disabled value="@eAct.email"/>
      }

      @* Если юзер - анонимус, то надо показать поля ввода паролей. *@
      @if(!ctx.isAuth) {

        @table_fieldset("Пароль:", ""){
          <input type="password" name="password.pw1"/>
        }

        @table_fieldset("Подтвердите пароль:", ""){
          <input type="password" name="password.pw2"/>

        }
          @* TODO Нужна ссылка с формой для логина в систему, если юзер уже зареган, но ещё не залогинен. *@
        }

        <div class="ft-XS color-light-strong invite-form_description">
          Используйте указанные e-mail и пароль в дальшейнем для авторизации в Sio.Market
        </div>

        <div class="submit-w __size-L __invite-form">
          <input class="siom-ac-btn __color-2 __size-M __ft-XM f-left" type="submit" valu="@Messages("Продолжить")" />
        </div>
      }

  </div>

}

