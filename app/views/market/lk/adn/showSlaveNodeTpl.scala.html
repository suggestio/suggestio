@(msup: MAdnNode, mslave:MAdnNode, mads: Seq[MAdT])(implicit ctx:util.Context)

@* Шаблон отображения магазина для админа ТЦ. *@
@import market.lk._

@import ctx._
@import helper._
@import market.lk.adn._node._
@import util.acl.CanSuperviseNode._
@import controllers.adn.AdnShowTypes._

@lkBase(mslave.meta.name) {
@defining( canSuperviseNode(supNode = msup, slaveNode = mslave) ) { isNodeSup =>

  @* Если не супервизор, то нечего тут командовать. *@
  @if(isNodeSup) {
    @helper.javascriptRouter("jsRoutes")(
      routes.javascript.MarketLkAdn.setSlaveTopLevelAvailable,
      routes.javascript.MarketLkAdn.nodeOnOffForm,
      routes.javascript.MarketLkAdn.nodeOnOffSubmit
    )
  }

  <div class="title-wrap">
    <div class="center">
      <a class="back-but" href="@routes.MarketLkAdn.showAdnNode(msup.id.get)">&nbsp;</a>
      <div class="title-inner">КАРТОЧКА АРЕНДАТОРА</div>
    </div>
  </div>

  <div class="body">

    <div class="shop-info">

      <div class="name-wrap">
        <span class="name">@mslave.meta.name</span>
        @mslave.adn.memberType.slaveNodeEditCall(mslave.id.get).map { call =>
          <a class="edit" href="@call">Редактировать</a>
        }
      </div>
      <div class="border-line"></div>

      <table class="block">
        <tr>
          @if(isNodeSup) {
            <td class="left">
              @_nodeOnOffSwitcherTpl(mslave)
            </td>
          }
          @_nodeDescrTdTpl(mslave)
        </tr>
      </table>


      @* Отобразить основное описание магазина с кнопкой редактирования. *@
      <div class="border-line"></div>
      @_floorSectionTableTpl(mslave)

      @* Переключалка доступа к первому уровню. *@
      @if(isNodeSup) {
        <div class="border-line"></div>
        <div>@_nodeFirstPageSwitcherTpl(mslave)</div>
      }

    </div>


    <div class="ads-list small">
      <span class="title">Рекламные плакаты</span>
      <div class="clear"></div>

      @* Каталог продукции арендатора. У карточек должны быть кнопки сокрытия объявы, неактивные карточки должны выделятся как-то. *@
      @_slaveNodeAdsTpl(msup, mads)

    </div>

  </div>

}
}