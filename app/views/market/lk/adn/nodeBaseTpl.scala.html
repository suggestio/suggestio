@(title: String, node: MAdnNode, isMyNode: Boolean, rightCurrEl: NodeRightPanelLink, povAdnIdOpt: Option[String] = None,
  rightBarAfter: Option[Html] = None)(content: Html)(implicit ctx: Context)


@import market.lk.adn._node._
@import ctx._
@import NodeRightPanelLinks._

@rightBar1 = {
  <nav class="right-bar_menu">
    <a class="right-bar_menu-i __show-profile@if(rightCurrEl == RPL_NODE){ __act}" href="@routes.MarketLkAdn.showAdnNode(node.id.get)">
      <span>Ваш профиль</span>
    </a>
    <hr class="delimiter"/>
    @if(isMyNode) {
      <a class="right-bar_menu-i __edit-profile@if(rightCurrEl == RPL_NODE_EDIT){ __act}" href="@routes.MarketLkAdnEdit.editAdnNode(node.id.get)">
        <span>Редактировать профиль</span>
      </a>
      <hr class="delimiter"/>
      <a class="right-bar_menu-i __change-pass@if(rightCurrEl == RPL_USER_EDIT){ __act}" href="@routes.MarketLkAdn.userProfileEdit(node.id.get, r = Some(ctx.request.path))">
        <span>@Messages("Password.change")</span>
      </a>
      <hr class="delimiter"/>

      @if(isSuperuser) {
        <a class="right-bar_menu-i" href="@routes.SysMarket.showAdnNode(node.id.get)">
          <span>System</span>
        </a>
        <hr class="delimiter"/>
      }
    }
  </nav>

  @rightBarAfter
}


@market.lk.lkBaseLayout(
  title     = title,
  leftCurrEl = Some(LkLeftPanelLinks.LPL_NODE),
  adnIdOpt  = node.id,
  rightBar  = Some(rightBar1),
  povAdnId  = povAdnIdOpt
)(content)
