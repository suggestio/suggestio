@(martId: String, welcomeAdOpt: Option[MAdT], mf: Form[_])(implicit ctx: util.Context)

@* Форма для выставления приветственной картинки-карточки. *@
@import ctx._
@import helper._

@*<div class="select-file-wrap">
  <div class="preview" id="welcomeAdPreview">
    @defining(mf("welcomeImgId").value) { imgIdOpt =>
      @defining(welcomeAdOpt.flatMap(_.imgs.headOption).map(_._2.filename)) { welcomeAdIdOpt =>
        <input class="image-key" type="hidden" name="welcomeImgId" value="@welcomeAdIdOpt"/>
        <img class="image-preview" width="59" src="@welcomeAdIdOpt.filter(!_.isEmpty).map { imgId =>@routes.Img.getImg(imgId) }.getOrElse {@routes.Assets.at("images/market/lk/empty-image.gif")}" />
      }
    }
  </div>
  <div class="selectbox">
    <div class="select-file">
      @stuff._fileUploadTpl(routes.Img.handleTempImg, relatedFieldId="welcomeAdPreview")
      <div class="bg">Выбрать файл для загрузки</div>
    </div>
    <div class="descr">
      Изображение, которое увидят пользователи при открытии Sio.Market
    </div>
  </div>
</div>*@

@defining(mf("welcomeImgId").value) { imgIdOpt =>

  @defining(welcomeAdOpt.flatMap(_.imgs.headOption).map(_._2.filename)) { welcomeAdIdOpt =>
    @welcomeAdIdOpt.filter(!_.isEmpty).map { imgId =>
      <div class="add-file-w __preview">
        <input class="js-image-key" type="hidden" name="welcomeImgId" value="@imgIdOpt"/>
        <img class="add-file-w_image js-image-preview" src="@routes.Img.getImg(imgId)" />
        <a class="add-file-w_btn siom-remove-image-btn js-remove-image" title="Удалить файл"></a>
      </div>
    }
  }

  <div class="add-file-w __size-S"  @if(!imgIdOpt.isEmpty) {style="display: none;"}>
    @stuff._fileUploadTpl(routes.Img.handleTempImg, fieldName = "welcomeImgId")
    <a class="add-file-w_btn siom-add-image-btn js-file-upload-btn" title="Загрузить файл"></a>
  </div>


}