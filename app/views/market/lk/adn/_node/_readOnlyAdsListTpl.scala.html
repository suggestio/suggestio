@(mads: Seq[MAd] = Nil, povAdnIdOpt: Option[String], ad2advMap: Map[String, MAdvI])(implicit ctx: Context)

@* Список рекламных карточек при просмотре чужого узла. При щелчке по карточке должна появится инфа по размещению
   с точки зрения узла povAdnIdOpt. *@

@import market.lk.ad._
@import ctx._

@wndAnchor(adId: String, advIdOpt: Option[Int])(text: Html) = {
  <a class="ads-list-block__link js-advertising-requests-item_get-info"
     href="@routes.MarketAdv.advFullWnd(adId, povAdnId = povAdnIdOpt, advId = advIdOpt, r = ctx.r)">
  </a>
}

@_adsListOuterTpl {

  @_adsListTpl(mads, coverDisableReason = false) { mad =>

    @* Если задан POV-узел, то отрендерить ссылку, которая отображает инфу по размещению карточки. *@
    @defining( mad.id.flatMap(ad2advMap.get) ) { advOpt =>

      @* Рендерим ссылку, которая что-то отображает. *@
      @wndAnchor(mad.id.get, advIdOpt = advOpt.flatMap(_.id)) {
        @* Для advOk выводим, что карточка принята к размещению. В остальных случаях предлагаем ознакомится с информацией. *@
        @advOpt.filter(_.isInstanceOf[MAdvOk]).fold {
          Нажмите для просмотра информации
        } { advOk =>
          Принята к размещению
        }
      }

    } @* defining advOpt *@

  } @* adsListTpl *@

}
