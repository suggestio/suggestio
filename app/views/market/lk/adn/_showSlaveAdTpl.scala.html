@(mslave: MAdnNode, mad: MAdT, msup: MAdnNode, sahf: Form[_])(implicit ctx: util.Context)

@* Форма отображения и супервайзинга рекламной карточки подчинённого узла (SioWeb/4.psd). *@

@import ctx._
@import helper._
@import controllers.MarketLkAdnSlaveAd.HideShopAdActions._
@import util.FormHelpers._
@import util.acl.CanSuperviseNode._
@import market.showcase._

@helper.javascriptRouter("jsRoutes2")(
  routes.javascript.MarketLkAdnSlaveAd.adPublishDialog
)

<div class="popup disable-ad" id="disable-ad">
  <div class="hat">
    <a href="#" class="close">&nbsp;</a>
  </div>

  <div class="content">

    <div class="ad-preview">
      @_single_offer(mad)
    </div>

    @* Для супервизора доступны кнопки управления рекламной карточкой. *@
    @if( canSuperviseNode(supNode = msup, slaveNode = mslave) ) {

      @* Кнопка сокрытия рекламной карточки. *@
      @form(routes.MarketLkAdnSlaveAd.slaveAdHideFormSubmit(mad.id.get)) {
        @* Допустимые значения: @HIDE *@
        <input type="hidden" name="action" value="@HIDE"/>

          <div class="hide-content">
            @* Причина сокрытия/удаления. *@
            <table cellpadding="0" cellspacing="0" class="input-wrap big textarea hide-label" style="margin-top: 20px;">
              @textarea(
                sahf("reason"),
                '_label -> "Причина",
                'placeholder -> "Напишите причину удаления"
              )
            </table>

            <div class="descr">
              Копия уведомления будет отправлена арендатору
              «<a href="@routes.MarketLkAdn.showSlave(mslave.id.get)">@mslave.meta.name</a>» на почту, указанную при регистрации.
            </div>
          </div>

          <div class="ovh" style="margin-top: 20px;">
                
            @* Кнопка публикации карточки на другом узле (в другом ресторане). *@

            <div class="gray-but add-to-another-node" >
              <div class="white-border-top">
                <a href="@routes.MarketLkAdnSlaveAd.adPublishDialog(mad.id.get)">@Messages("add.to.other." + mslave.adn.memberType)</a>
              </div>
            </div>

            <input class="blue-but-small f-right" type="submit" value="Выключить" />
          </div>

      } @* ad hide form *@




    } @* if supervisor *@

  </div>

</div>

<script type="text/javascript">
  market.resize_preview_photos();
</script>