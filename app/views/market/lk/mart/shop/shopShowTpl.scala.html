@(mmart: MAdnNode, mshop:MAdnNode, mads: Seq[MAdT])(implicit ctx:util.Context)

@* Шаблон отображения магазина для админа ТЦ. *@
@import market.lk._

@import ctx._
@import helper._
@import market.lk.adn._node._
@import util.acl.CanSuperviseNode._

@lkBase(mshop.meta.name) {
@defining( canSuperviseNode(supNode = mmart, slaveNode = mshop) ) { isNodeSup =>

  @* Если не супервизор, то нечего тут командовать. *@
  @if(isNodeSup) {
    @helper.javascriptRouter("jsRoutes")(
      routes.javascript.MarketMartLk.setShopTopLevelAvailable,
      routes.javascript.MarketLkAdn.nodeOnOffForm,
      routes.javascript.MarketLkAdn.nodeOnOffSubmit
    )
  }

  <div class="title-wrap">
    <div class="center">
      <a class="back-but" href="@routes.MarketLkAdn.showAdnNode(mmart.id.get)">&nbsp;</a>
      <div class="title-inner">КАРТОЧКА АРЕНДАТОРА</div>
    </div>
  </div>

  <div class="body">

    <div class="shop-info">

      <div class="name-wrap">
        <span class="name">@mshop.meta.name</span>
        <a class="edit" href="@routes.MarketShopLk.editShopForm(mshop.id.get)">Редактировать</a>
      </div>
      <div class="border-line"></div>

      <table class="block">
        <tr>
          @if(isNodeSup) {
            <td class="left">
              @_nodeOnOffSwitcherTpl(mshop)
            </td>
          }
          @_nodeDescrTdTpl(mshop)
        </tr>
      </table>


      @* Отобразить основное описание магазина с кнопкой редактирования. *@
      <div class="border-line"></div>
      @_floorSectionTableTpl(mshop)

      @* Переключалка доступа к первому уровню. *@
      @if(isNodeSup) {
        <div class="border-line"></div>
        <div>@_nodeFirstPageSwitcherTpl(mshop)</div>
      }

    </div>


    <div class="ads-list small">
      <span class="title">Рекламные плакаты</span>

      @* Каталог продукции арендатора. У карточек должны быть кнопки сокрытия объявы, неактивные карточки должны выделятся как-то. *@
      @_slaveNodeAdsTpl(
        msup = mmart,
        mnode = mshop,
        mads = mads
      )

    </div>

  </div>

}
}