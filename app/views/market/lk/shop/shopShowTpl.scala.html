@(mmart: MAdnNode, mshop:MAdnNode, mads:Seq[MAdT])(implicit ctx:util.Context)

@* Страница отображения магазина для арендатора ТЦ (т.е. для владельца этого магазина). *@
@import market.lk._

@import routes.MarketShopLk._
@import ctx._
@import AdShowLevels._

@helper.javascriptRouter("jsRoutes")(
  routes.javascript.MarketAd.updateShowLevelSubmit
)

@lkBase(mshop.meta.name) {

  <div class="title-wrap">
    <div class="center">
      <a class="back-but" href="@routes.MarketLk.lkList">&nbsp;</a>
      <div class="title-inner">
        ЛИЧНЫЙ КАБИНЕТ АРЕНДАТОРА
      </div>
    </div>
  </div>

  <div class="body">

    <input id="maxShopAds" type="hidden" value="@mshop.adn.showLevelsInfo.maxOutAtLevel(LVL_PRODUCER)" />

    <div class="shop-info">

      <div class="name-wrap">
        <span class="name">@mshop.meta.name</span>
        <a class="edit" href="@editShopForm(mshop.id.get)">Редактировать</a>
      </div>
      <div class="border-line"></div>

      <table class="block">
        <tr>
          <td class="right" style="border-left: none; padding-left: 0;">
            <div class="shop-descr">
              @mshop.meta.description
            </div>
          </td>
        </tr>
      </table>

      @* Отобразить основное описание магазина с кнопкой редактирования. *@
      @shop._shopShowTpl(
        mshop = mshop,
        editCall = routes.MarketShopLk.editShopForm(mshop.id.get)
      )

    </div>


    @defining(mshop.adn.showLevelsInfo.canOutAtLevel(LVL_RECEIVER_TOP)) { htl =>
      @market.lk.ad._adsEditableListTpl(
        mads = mads,
        mmart = mmart,
        addCall = routes.MarketAd.createShopAd(mshop.id.get),
        editCall = routes.MarketAd.editShopAd(_),
        mshopOpt = Some(mshop),
        isShownF = isShownShopAd(htl, _)
      ) { mad =>
        @* Галочки для управления отображением рекламной карточки магазина. *@
        @defining(mad.allWantShowLevels) { sls =>
          <div class="controls">
            <label class="common-catalog">
              <input class="one-checkbox" type="checkbox" data-level="@LVL_MART_SHOPS" data-adid="@mad.id" data-name="common-catalog" @if(sls contains LVL_MART_SHOPS) {data-checked="checked"}/>Выводить в общем каталоге
            </label>
            <label class="shop-catalog">
              <input type="checkbox" data-level="@LVL_SHOP" data-adid="@mad.id" @if(sls contains LVL_SHOP) {data-checked="checked"}/>Выводить в моём магазине
            </label>
            <label class="firstPage-catalog @if(!htl){inactive}">
              <input class="one-checkbox" data-name="firstPage-catalog" type="checkbox" data-level="@LVL_MART_SHOWCASE" data-adid="@mad.id" @if(!htl){disabled="disabled"} @if(sls contains LVL_MART_SHOWCASE) {data-checked="checked"}/>Размещение на первом экране
            </label>
          </div>
        }
      }
    }

  </div>

}
