@(mmart: MMart, mshop:MShop, mads:Seq[MMartAd])(implicit ctx:util.Context)

@* Страница отображения магазина для арендатора ТЦ (т.е. для владельца этого магазина). *@
@import market.lk._

@import routes.MarketShopLk._
@import ctx._
@import AdShowLevels._

@helper.javascriptRouter("jsRoutes")(
  routes.javascript.MarketAd.updateShowLevelSubmit
)

@lkBase(mshop.name) {

  <div class="title-wrap">
    <div class="center">
      <a class="back-but" href="@routes.MarketLk.lkList">&nbsp;</a>
      <div class="title-inner">
        ЛИЧНЫЙ КАБИНЕТ АРЕНДАТОРА
      </div>
    </div>
  </div>

  <div class="body">

    <input id="maxShopAds" type="hidden" value="@mshop.settings.supLShopMaxAdsShown" />

    <div class="shop-info">

      <div class="name-wrap">
        <span class="name">@mshop.name</span>
        <a class="edit" href="@editShopForm(mshop.id.get)">Редактировать</a>
      </div>
      <div class="border-line"></div>

      <table class="block">
        <tr>
          <td class="right" style="border-left: none; padding-left: 0;">
            <div class="shop-descr">
              @mshop.description
            </div>
          </td>
        </tr>
      </table>

      @* Отобразить основное описание магазина с кнопкой редактирования. *@
      @shop._shopShowTpl(
        mshop=mshop,
        editCall=routes.MarketShopLk.editShopForm(mshop.id.get)
      )

    </div>


    @market.lk.ad._adsEditableListTpl(
      mads = mads,
      mmart = mmart,
      addCall = routes.MarketAd.createShopAd(mshop.id.get),
      editCall = routes.MarketAd.editShopAd(_),
      mshopOpt = Some(mshop)
    ) { mad =>
      @* Галочки для управления отображением рекламной карточки магазина *@
      <div class="controls">
        <label class="shopAd-fix">
          <input class="one-checkbox" type="checkbox" data-level="@LVL_MART_SHOPS" data-adid="@mad.id.get" data-name="lvl-mart-shops" @if(mad.showLevels contains LVL_MART_SHOPS) {data-checked="checked"}/>Выводить в общем каталоге
        </label>
        <label>
          <input type="checkbox" data-level="@LVL_SHOP" data-adid="@mad.id.get" @if(mad.showLevels contains LVL_SHOP) {data-checked="checked"}/>Выводить в моём магазине
        </label>
        @defining(mshop.hasTopLevelAccess) { htl =>
          <label@if(!htl){ class="inactive"}>
            <input type="checkbox" data-level="@LVL_MART_SHOWCASE" data-adid="@mad.id.get" @if(!htl){disabled="disabled"} @if(mad.showLevels contains LVL_MART_SHOWCASE) {data-checked="checked"}/>Размещение на первом экране
          </label>
        }
      </div>
    }

  </div>

}
