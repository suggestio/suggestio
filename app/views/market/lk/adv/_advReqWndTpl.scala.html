@(adProducer: MAdnNode, adRcvr: MAdnNode, mad: MAd, advReq: MAdvReq, refuseFormM: Form[_])(implicit ctx: Context)

@* Рендер окошка, отображающего предложение размещения рекламной карточки у узла. *@
@import ctx._
@import market.showcase._
@import util.TplDataFormatUtil._
@import helper._
@import util.FormHelpers._
@import util.DateTimePrettyPrinter._

<div class="popup" id="advReqWindTpl">

  <div class="hat">
    <a href="#" class="close">&nbsp;</a>
  </div>

  <div class="content">
    <div>
      <div class="ad-preview">
        @_single_offer(mad)
      </div>

      <div class="popup_title">
        Запрос размещения рекламы от <a href="@routes.MarketLkAdn.showAdnNode(mad.producerId)">@adProducer.meta.name</a>
      </div>

      <p>С @formatDate(advReq.dateStart) по @formatDate(advReq.dateEnd)</p>
      @if(advReq.onStartPage) {
        <p>+ Размещение на главном экране</p>
      }

      <p>Стоимость согласно <a href="@routes.MarketLkBilling._renderNodeMbmdsWindow(adRcvr.id.get)">ставке тарифных планов</a>.</p>

      <p>@formatPrice(advReq.amountWithComission, advReq.currency)</p>

      @* Отменить размещение рекламы с указанием причины. *@
      @form(routes.MarketAdv.advReqRefuseSubmit(advReq.id.get)) {
        @textarea(refuseFormM("reason"))
        <input type="submit" value="Отменить размещение"/>
      }

      @* Подтвердить размещение рекламы. *@
      @form(routes.MarketAdv.advReqAcceptSubmit(advReq.id.get)) {
        <input type="submit" value="Разместить"/>
      }
    </div>

  </div>

</div>
