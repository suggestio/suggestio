@(adProducer: MAdnNode, mad: MAd, advReq: MAdvReq, refuseFormM: Form[_], goBackTo: Option[String] = None)(implicit ctx: Context)

@* Рендер окошка, отображающего предложение размещения рекламной карточки у узла. *@

@import ctx._
@import util.TplDataFormatUtil._
@import helper._
@import util.FC.tdFc
@import util.DateTimePrettyPrinter._

@_advWndFullTpl(mad, adProducer) {

  <p style="margin-top: 0;">
    <strong>Запрос размещения рекламы от <a class="blue-link" href="@routes.MarketLkAdn.showAdnNode(mad.producerId)">@adProducer.meta.name</a></strong>
    <br/>

    <span class="gray font-12">С @formatDate(advReq.dateStart) по @formatDate(advReq.dateEnd)</span><br/>
    @if( advReq.showLevels contains AdShowLevels.LVL_MEMBERS_CATALOG ) {
      <span>+ Размещение в категориях товаров и услуг</span>
    }
    @if( advReq.showLevels contains AdShowLevels.LVL_START_PAGE ) {
      <span>+ Размещение на главном экране</span>
    }

  </p>

  <p class="gray font-12">
    <strong class="adv-req-wind_price">@formatPrice(advReq.amountMinusComission, advReq.currency)</strong>
  </p>

  @* Отменить размещение рекламы с указанием причины. *@
  @form(
    routes.MarketAdv.advReqRefuseSubmit(advReq.id.get, r = goBackTo),
    'id -> "advReqRefuse"
  ) {
    @textarea(refuseFormM("reason"), '_label -> "", 'placeholder -> "Напишите причину отмены")

    <div class="submit-w __size-S">

      <a class="siom-ac-btn __color-4 __size-M __ft-XM f-left" id="advReqAcceptShow">
        Отменить
      </a>

      <a class="siom-ac-btn __color-3 __size-M __ft-XM f-right js-submit-btn">
        Отправить отказ
      </a>

    </div>

  }

  @* Подтвердить размещение рекламы. *@
  @form(
    routes.MarketAdv.advReqAcceptSubmit(advReq.id.get, r = goBackTo),
    'id -> "advReqAccept"
  ) {
    <div class="submit-w __size-S">

      <a class="siom-ac-btn __color-4 __size-M __ft-XM f-left" id="advReqRefuseShow">
        Отменить размещение
      </a>

      <a class="siom-ac-btn __color-1 __size-M __ft-XM f-right js-submit-btn">Разместить</a>

    </div>

  }

}
