@(adProducer: MAdnNode, adRcvr: MAdnNode, mad: MAd, advReq: MAdvReq, refuseFormM: Form[_])(implicit ctx: Context)

@* Рендер окошка, отображающего предложение размещения рекламной карточки у узла. *@
@import ctx._
@import market.showcase._
@import util.TplDataFormatUtil._
@import helper._
@import util.FormHelpers._
@import util.DateTimePrettyPrinter._

<div class="popup adv-req-wind" id="advReqWind">

  <div class="hat">
    <a href="#" class="close">&nbsp;</a>
  </div>

  <div class="content">
    <div>
      <div class="ad-preview">
        @_single_offer(mad)
      </div>

      <div class="popup_title">
        <strong>Запрос размещения рекламы от</strong> <a href="@routes.MarketLkAdn.showAdnNode(mad.producerId)">@adProducer.meta.name</a>
      </div>

      <p class="gray font-12">С @formatDate(advReq.dateStart) по @formatDate(advReq.dateEnd)</p>
      @if(advReq.onStartPage) {
        <p>+ Размещение на главном экране</p>
      }

      <p class="gray font-12">Стоимость согласно <a href="@routes.MarketLkBilling._renderNodeMbmdsWindow(adRcvr.id.get)">ставке тарифных планов</a>.</p>

      <strong class="adv-req-wind_price">@formatPrice(advReq.amountWithComission, advReq.currency)</strong>


      @* Отменить размещение рекламы с указанием причины. *@
      @form(routes.MarketAdv.advReqRefuseSubmit(advReq.id.get)) {
        @textarea(refuseFormM("reason"))
        <input class="gray-but-small f-left" type="submit" value="Отменить" style="margin: 25px 0 25px 100px;"/>
      }

      @* Подтвердить размещение рекламы. *@
      @form(routes.MarketAdv.advReqAcceptSubmit(advReq.id.get)) {
        <input class="red-but-small f-right" type="submit" value="Разместить" style="margin: 25px 100px 25px 0;"/>
      }



    </div>

  </div>

</div>
