@(adProducer: MAdnNode, adRcvr: MAdnNode, mad: MAd, advReq: MAdvReq, refuseFormM: Form[_])(implicit ctx: Context)

@* Рендер окошка, отображающего предложение размещения рекламной карточки у узла. *@
@import ctx._
@import market.showcase._
@import util.TplDataFormatUtil._
@import helper._
@import util.FormHelpers._
@import util.DateTimePrettyPrinter._

<div class="popup adv-req-wind" id="advReqWind" xmlns="http://www.w3.org/1999/html">

  <div class="hat">
    <a href="#" class="close">&nbsp;</a>
  </div>

  <div class="content">
    <div class="sio-mart-showcase" style="position: relative;">
      @_single_offer_w_description(mad, false, false, adProducer, 1, 1)
    </div>
  </div>

  <hr class="line-gray" />

  <div class="content">

      <p style="margin-top: 0;">
        <strong>Запрос размещения рекламы от <a href="@routes.MarketLkAdn.showAdnNode(mad.producerId)">@adProducer.meta.name</a></strong>
        <br/>

        <span class="gray font-12">С @formatDate(advReq.dateStart) по @formatDate(advReq.dateEnd)</span><br/>
        @if(advReq.onStartPage) {
          <span>+ Размещение на главном экране</span>
        }

      </p>

      <p class="gray font-12">
        Стоимость согласно <a href="@routes.MarketLkBilling._renderNodeMbmdsWindow(adRcvr.id.get)">ставке тарифных планов</a>.
        <br/>
        <strong class="adv-req-wind_price">@formatPrice(advReq.amountWithComission, advReq.currency)</strong>
      </p>

      @* Отменить размещение рекламы с указанием причины. *@
      @form(routes.MarketAdv.advReqRefuseSubmit(advReq.id.get), 'id -> "advReqRefuse") {
        @textarea(refuseFormM("reason"), '_label -> "", 'placeholder -> "Напишите причину отмены")
        <input class="gray-but-small f-left" type="submit" value="Отменить" style="margin: 25px 0 25px 150px;"/>
      }

      @* Подтвердить размещение рекламы. *@
      @form(routes.MarketAdv.advReqAcceptSubmit(advReq.id.get)) {
        <input class="red-but-small f-right" type="submit" value="Разместить" style="margin: 25px 150px 25px 0;"/>
      }


  </div>

</div>
