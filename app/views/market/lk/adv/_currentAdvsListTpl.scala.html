@(advs: Seq[MAdvI], adv2adn: Map[Int, MAdnNode])(implicit ctx: Context)

@* Список размещений какой-то рекламной карточки. *@

@import MAdvModes._
@import ctx._
@import datetime._
@import util.TplDataFormatUtil._

@_single_status(StatusClass:String)(Message:Html) = {
  <div class="advs-statuses__status advs-statuses__@StatusClass"><div class="advs-statuses__status-icon advs-statuses__status-icon_@StatusClass"></div>@Message</div>
}

<div class="advs-statuses">
@advs.map { adv =>
  @adv2adn.get(adv.id.get).map { node =>

    @defining( Messages("amt.of.type." + node.adn.memberType) + " <strong>" + node.meta.name + " / " + node.meta.town + "</strong>" ) { message_head =>

    @adv match {
      case advOk: MAdvOk => {
        @_single_status( "approved" ) {
          @Html(message_head) одобрил размещение. @_prettyDate(advOk.dateStatus)
        }
        @* dateStatus - одобрение, dateStart - начало размещения. *@
      }
      case advReq: MAdvReq => {
        @_single_status( "pending" ) {
          @Html(message_head) рассматривает размещение.
        }
      }
      case advRefused: MAdvRefuse => {
        @_single_status( "declined" ) {
          @Html(message_head) отменил размещение. @advRefused.reason
        }
      }
    }
    }
  }

}
</div>