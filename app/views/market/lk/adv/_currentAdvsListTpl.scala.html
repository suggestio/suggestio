@(advs: Seq[MAdvI], adv2adn: Map[Int, MAdnNode])(implicit ctx: Context)

@* Список размещений какой-то рекламной карточки. *@

@import MAdvModes._
@import ctx._
@import datetime._
@import util.TplDataFormatUtil._

@_single_status(statusClass: String, node: MAdnNode)(content: Html) = {
  <div class="adv-status_i __@statusClass">
    <span class="ft-M light-gray f-left">@node.meta.name / @node.meta.town</span>
    @*Messages("amt.of.type." + node.adn.shownTypeId)*@
    @content
  </div>
}

<hr class="delimiter __light"/>
<div class="adv-status_lst">
  <h2 class="minor-title">Активность карточки</h2>

  @advs.map { adv =>
    @adv2adn.get(adv.id.get).map { node =>

      @adv match {
        case advOk: MAdvOk => {
          @_single_status( "approved", node ) {
            @*if(advOk.isOnline){ <a class="blue-link" href="@routes.MarketShowcase.demoWebSite(node.id.get)">}одобрил размещение@if(advOk.isOnline){</a> }*@
            <span class="green">размещено</span> <span class="adv-status_i-time">@_prettyDate(advOk.dateStatus)</span>
          }
          @* dateStatus - одобрение, dateStart - начало размещения. *@
        }
        case advReq: MAdvReq => {
          @_single_status( "pending", node ) {
            на рассмотрении <span class="adv-status_i-time">@_prettyDate(advReq.dateStatus)</span>
          }
        }
        case advRefused: MAdvRefuse => {
          @_single_status( "declined", node ) {
            <span class="red">отказано</span> @*advRefused.reason*@ <span class="adv-status_i-time">@_prettyDate(advRefused.dateStatus)</span>
          }
        }
      }

    }

  }

</div>
<button class="btn __helper __size-S adv-status_btn f-right">История операции</button>

