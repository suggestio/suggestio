@(af: Form[_], call: Call, btnText: String, dfltIsProduct: Boolean = true)(implicit ctx: util.Context)

@* Рендер формы редактирования произвольной рекламы.
   * dfltIsProduct обозначает дефолтовый режим работы формы. true - с ценами, false - реклама со скидками. *@
@import ctx._
@import helper._

@form(call, 'id -> "promoOfferForm") {

  @* Input для id выбранной категории. *@
  <input class="result" id="cat-input" data-curr-cat="cat" type="hidden" name="catId" value="@af("catId").value" />

  @* Input для цвета верхней плашки. *@
  <input type="hidden" name="panel.color" value="@af("panel.color").value.getOrElse("#000000")"/>

  @* TODO Сейчас рендерится только один кусок формы. Нужно сделать js-переключение между двумя вариантами формы.
          Сервер в POST должен получать только один вариант формы, иначе будет ошибка. *@
  @if(dfltIsProduct) {
    @_adFormProductTpl(af)
  } else {
    @_adFormDiscountTpl(af)
  }

  @* Данные по картинке загруженной. *@
  <input type="hidden" name="image_key" value="@af("image_key").value"/>
  <img class="image-preview" width="200"  style="display: none" src=""/>

  <input type="submit" value="@btnText"/>
}

@* Картинки - это фактически отдельная форма, и её надо в отдельный файл. *@
@stuff._fileUploadTpl(routes.Img.handleTempImg, relatedFormId="promoOfferForm")
