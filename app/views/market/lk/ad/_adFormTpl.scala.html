@(af: Form[_], call: Call, btnText: String, dfltIsProduct: Boolean = true)(implicit ctx: util.Context)

@* Рендер формы редактирования произвольной рекламы.
   * dfltIsProduct обозначает дефолтовый режим работы формы. true - с ценами, false - реклама со скидками. *@
@import ctx._
@import helper._

@form(call, 'id -> "promoOfferForm") {

  @af.globalError

  @* Input для id выбранной категории. *@
  <input type="hidden" name="catId" value="@af("catId").value"/>

  @* Input для цвета верхней плашки. *@
  <input type="hidden" name="panelColor" value="@af("panel.color").value.getOrElse("#000000")"/>

  @* TODO Сейчас рендерится только один кусок формы. Нужно сделать js-переключение между двумя вариантами формы.
          Сервер в POST должен получать только один вариант формы, иначе будет ошибка. *@
  @if(dfltIsProduct) {
    @_adFormProductTpl(af)
  } else {
    @_adFormDiscountTpl(af)
  }

  @* Данные по картинке загруженной. *@
  @defining(af("image_key").value) { imgIdOpt =>
    <input type="hidden" name="image_key" value="@imgIdOpt"/>
    <img class="image-preview" width="200" src="@if(imgIdOpt.isDefined) {@routes.Img.getImg(imgIdOpt.get)}" style="@if(imgIdOpt.isEmpty) {display: none}"/>
  }
  @*  *@

  @* Положение текста на разных устройствах. Как оно задаётся - хз, пока в виде произвольной строки. *@
  @inputText(af("textAlign.phone"), '_label -> "iphone")
  @inputText(af("textAlign.tablet"), '_label -> "ipad")

  <input type="submit" value="@btnText"/>
}

@* Картинки - это фактически отдельная форма, и её надо в отдельный файл. *@
@stuff._fileUploadTpl(routes.Img.handleTempImg, relatedFormId="promoOfferForm")
