@(af: Form[_], call: Call, btnText: String, dfltIsProduct: Boolean = true)(implicit ctx: util.Context)

@* Рендер формы редактирования произвольной рекламы.
   * dfltIsProduct обозначает дефолтовый режим работы формы. true - с ценами, false - реклама со скидками. *@
@import ctx._
@import helper._

@form(call) {

  @* Input для id выбранной категории. *@
  <input type="hidden" name="catId" value="@af("catId").value"/>

  @* Input для id картинки загруженной. *@
  <input type="hidden" name="imgId" value="@af("imgId").value"/>

  @* Input для цвета верхней плашки. *@
  <input type="hidden" name="panel.color" value="@af("panel.color").value"/>

  @* TODO Сейчас рендерится только один кусок формы. Нужно сделать js-переключение между двумя вариантами формы.
          Сервер в POST должен получать только один вариант формы, иначе будет ошибка. *@
  @if(dfltIsProduct) {
    @_adFormProductTpl(af)
  } else {
    @_adFormDiscountTpl(af)
  }
  <input type="hidden" name="imgId" value="@af("imgId").value"/>
  <img class="image-preview" width="200"  style="display: none" src=""/>

  <input type="submit" value="@btnText"/>
}

@* Картинки - это фактически отдельная форма, и её надо в отдельный файл. *@
@stuff._fileUploadTpl(routes.Img.handleTempImg, formId="promoOfferUploadForm", jsCallback="market_image_form_upload")
