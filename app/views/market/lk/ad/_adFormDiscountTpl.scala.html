@(af: Form[_], isShown:Boolean = false)(implicit ctx: util.Context)

@* Discount-часть формы: текст и скидка. *@

@import ctx._
@import helper._
@import util.FormHelpers.myFields
@import controllers.MarketAd.{DISCOUNT_TPL_ID_MIN, DISCOUNT_TPL_ID_MAX}

@mkField(isBig: Boolean)(content: Html) = {
  <table cellpadding="0" cellspacing="0" class="input-wrap@if(isBig){ big}">
    <tr>@content</tr>
  </table>
}

@* Подшаблон для выбора цвета фона discount-шаблона. *@
@tplColorItem(color: String) = {
  <div class="item">
    <input type="checkbox" class="one-checkbox" data-name="mask-color" data-value="@color"/>
    <div class="color" style="background: #@color;">&nbsp;</div>
  </div>
}

<div class="tab-content"@if(!isShown) { style="display: none;"}>
  @mkField(true) {
    @inputText(
      af("ad.text1.value"),
      '_label -> "Текст сверху:",
      'id     -> "text1ValueInput"
    )
    @_selectColorTpl("ad.text1.color", af)
  }

  @mkField(false) {
    @inputText(
      af("ad.discount.value"),
      '_label -> "Скидка в процентах:",
      'id     -> "discountValueInput"
    )
    @_selectColorTpl("ad.discount.color", af)
  }

  @mkField(true) {
    @inputText(
      af("ad.discount.value"),
      '_label -> "Текст снизу:",
      'id -> "text2ValueInput"
    )
    @_selectColorTpl("ad.discount.color", af)
  }

  <table cellpadding="0" cellspacing="0" class="mask-list input-wrap big">
    <tr>
      <td class="left">
        <label>Шаблон:</label>
      </td>

      <td class="right">
        @defining(DISCOUNT_TPL_ID_MIN to DISCOUNT_TPL_ID_MAX) { is => @is.map { i =>
          <div class="item mask-@i">
            <input type="checkbox" class="one-checkbox" data-name="mask"/>
          </div>
        }}
      </td>
    </tr>
  </table>

  <table cellpadding="0" cellspacing="0" class="color-list input-wrap big">
    <tr>
      <td class="left">
        <label>Цвет шаблона:</label>
      </td>

      <td class="right">
        @tplColorItem("ce2222")
        @tplColorItem("fee800")
        @tplColorItem("e3a51a")
        @tplColorItem("4fce22")
      </td>
    </tr>
  </table>

</div><!-- .tab-content end -->
