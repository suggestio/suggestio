@(ads: Seq[MMartAd])(implicit ctx: util.Context)

@* Инлайновый список рекламных карточек в личном кабинете ТЦ или магазина. *@
@import ctx._
@import AdShowLevels._


@helper.javascriptRouter("jsRoutes")(
  routes.javascript.MarketAd.updateShowLevelSubmit
)

@* Это сообщение для отладки. Удалить при первой необходимости. *@
@if(ads.isEmpty) {
  Нет рекламных карточек.
}

@ads.zipWithIndex.map { case (ad, i) =>

  <div class="item" style="@if(i%3 != 1) {margin-right: 30px;}">
    <div class="preview">
      <a class="hover" href="@routes.MarketAd.editShopAd(ad.id.get)">&nbsp;</a>
      <img src="@routes.Img.getThumb("asdasd", ad.img.id)"/>
      <br/>
      <a href="@routes.MarketAd.editShopAd(ad.id.get)">@Messages("Edit")</a>

      @ad.offers.map {
        case prodOffer: MMartAdProduct => {
          @* Рендерим карточку с товаром и ценой *@
          <p>Производитель: @prodOffer.vendor.value</p>
          @prodOffer.oldPrice.map { oldPrice =>
            <p>Старая цена: @oldPrice.value</p>
          }
          <p>Новая цена: @prodOffer.price.value</p>
        }

        case discountOffer: MMartAdDiscount => {
          @* Рендерим карточку с указанием скидочной акции *@
          @discountOffer.text1.map { text1 =>
            <p>@text1.value</p>
          }
          <p>@discountOffer.discount.value</p>
          @discountOffer.text2.map { text2 =>
            <p>@text2.value</p>
          }
        }

        case textOffer: MMartAdText => {
          TODO Надо это как-то отображать. Ещё есть поле .color
          @Html(textOffer.text.value)
        }
      }
    </div>


  </div>

}
