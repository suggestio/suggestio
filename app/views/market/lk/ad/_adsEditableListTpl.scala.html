@(mads: Seq[MAdT], addCall: Call, editCall: String => Call)(content: MAdT => Html)(implicit ctx: util.Context)

@* Встраиваемый список изменяемых рекламных карточек.
   isShownF содержит функцию, которая определяет, является ли текущая карточка отображаемой на момент рендера.
   content содержит функцию рендерера одной рекламной карточки в списке. *@

@import ctx._
@import AdShowLevels._

<div class="ads-list">

  <div class="lk-h2">Рекламные плакаты</div>

  <div class="ads-list__block ads-list-block">
    <a class="ads-list-block__link" href="@addCall" style="background: none;"></a>
    <div class="ads-list-block__preview ads-list-block__preview_add-new">
    </div>

  </div>

  @mads.zipWithIndex.map { case (ad, i) =>

    @* TODO Уровни отображения какого получателя надо брать за основу? Пока берутся все адресаты рекламы. *@
    <div class="ads-list__block ads-list-block @if(!ad.isPublished) {disabled}">

      <div class="ads-list-block__preview">
        @_adDisableReasonCoverTpl(ad.disableReason)
        <div class="ads-list-block__preview-container">
          @market.showcase._single_offer(ad)
        </div>
        <div class="ads-list-block__zigzag-mask"></div>
      </div>

      <a class="ads-list-block__link" href="@editCall(ad.id.get)"></a>

      @content(ad)

    </div>

  }

  <div class="clear"></div>

</div>