@(mmart: MAdnNode, shops: Map[String, MAdnNode], mmcats: Seq[MMartCategory], welcomeAdOpt: Option[MWelcomeAd], catsStats: Map[String, Long], spsr: AdSearch)(implicit ctx: Context)

@* Начальная страница для sio-market. *@

@import util.img.WelcomeUtil.WELCOME_IMG_KEY

@* Картинка-приветствие для первого экрана *@
@welcomeAdOpt.flatMap(_.imgs.get(WELCOME_IMG_KEY)).map { welcomeAdImg =>
<div class="sm-welcome-ad">
  <img style="background-color: #@mmart.meta.color;" id="smWelcomeAd" class="sm-welcome-ad__img js-index-welcome-ad"
       data-width="@welcomeAdImg.meta.map(_.width)"
       data-height="@welcomeAdImg.meta.map(_.height)"
       src="@ctx.myAudienceUrl@routes.Img.getImg(welcomeAdImg.filename)"/>
</div>
}

@* Основной контейнер, шапка + карточки *@
<div class="sio-mart__node-offers-root" id="sioMartNodeOffersRoot"></div>

@_screen_nav_button("close", "smCloseButton")


<div class="sio-mart-home-button" id="sioMartHomeButton">
  <span></span>
</div>

@if( !catsStats.isEmpty ){
@* Кнопка вызова окошка с категориями, находится всегда справа сверху *@
<div class="categories-button" id="smCategoriesButton">
  <span></span>
</div>
@* Окно с выбором категорий *@
@_categories_w_search(mmcats, mmart, catsStats, withSubnodesBtn = !shops.isEmpty)
}

<div class="sio-mart__producer-header" style="background-color: #@mmart.meta.color;">
  @mmart.logoImgOpt.map { logoImg =>
  <img id="rootNodeLogo" class="sm-offer-logo" height="30" style="height: 30px!important;" src="@ctx.myAudienceUrl@routes.Img.getImg(logoImg.filename)"/>
  }
</div>

<div class="sm-flex sm-overflow-scrolling">
  <div class="sm-flex sm-overflow-scrolling sio-mart__index-offers" id="sioMartIndexOffers">
    <div class="sm-flex sio-mart__index-offers__container" style="margin-bottom: -1px;" id="sioMartIndexGridLayout">

      <div id="sioMartIndexGrid" data-index-offers-action="@routes.MarketShowcase.findAds(spsr)" style="position: relative; width: 100%;">
      </div>

      <div style="height: 60px;"></div>

      <div class="grid-loader" style="height: 50px;" id="gridAdsLoader">
        <div style="position: relative; height: 1px; width: 100%; background: #999;">
          <div style="padding: 5px; position: absolute; left: 50%; top: 50%; margin-left: -15px; margin-top: -16px; background: #fff;">
            <img style="width: 24px; height: 24px;" src="@ctx.myAudienceUrl/assets/images/market/grid-ads-loader.gif"/>
          </div>
        </div>
      </div>

      <div style="height: 60px;"></div>

    </div>
  </div>
</div>

<div class="sm-notification" id="smNotification">
  <div class="data" id="smNotificationData"></div>
</div>

<div class="sm-loading" id="smLoading"></div>

<div class="sm-preload">
  <img src="@ctx.myAudienceUrl/assets/images/market/categories/icons.png">
</div>

@* Окно с предупреждением о выходе из Sio.Market *@
@_exit_screen()

@* Окно с выбором магазина *@
@_shop_list(shops, mmart)