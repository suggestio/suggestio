@(args: SMShowcaseIndexArgs)(implicit ctx: Context)

@* Начальная страница для sio-market. Многочисленные аргументы передаются в контейнере для удобства передачи оных в подшаблоны. *@

@import util.img.WelcomeUtil.WELCOME_IMG_KEY

@* Картинка-приветствие для первого экрана *@
@args.welcomeAdOpt.flatMap(_.imgs.get(WELCOME_IMG_KEY)).map { welcomeAdImg =>
<div class="sm-welcome-ad">
  <img style="background-color: #@args.bgColor;" id="smWelcomeAd" class="sm-welcome-ad__img js-index-welcome-ad"
       data-width="@welcomeAdImg.meta.map(_.width)"
       data-height="@welcomeAdImg.meta.map(_.height)"
       src="@ctx.myAudienceUrl@routes.Img.getImg(welcomeAdImg.filename)"/>
</div>
}

@* Основной контейнер, шапка + карточки *@
<div class="sm-producer-offers" id="sioMartNodeOffersRoot"></div>

@* Хидер главного экрана *@
<div id="smRootProducerHeader" class="sm-producer-header abs" style="@stuff._bgcolor( args.bgColor )">

  <div class="sm-producer-header_exit-button sm-button abs" id="smExitButton">
    <div style="width: 10px; height: 10px; background: red;"></div>
  </div>

  <div class="sm-producer-header_index-button sm-button abs" id="smIndexButton">
    <div style="width: 10px; height: 10px; background: olive;"></div>
  </div>

  <img class="sm-producer-header_logo" height="30" src="@ctx.myAudienceUrl@args.logoImgOpt.map { logoImg => @routes.Img.getImg(logoImg.filename)}.getOrElse{}"/>

  @if( args.catsStats.nonEmpty ){
  <div class="sm-button abs"  id="smNavigationLayerButton" style="left: auto; right: 0px"></div>
  }

</div>

@* Работа с сеткой карточек *@
@_gridAdsTpl(args)

@* Окно с выбором категорий *@
@if( args.catsStats.nonEmpty ){
  @_categories_w_search(args)
}

@* Окно с предупреждением о выходе из Sio.Market *@
@_exit_screen(args.oncloseHref)

<div class="sm-loading" id="smLoading"></div>