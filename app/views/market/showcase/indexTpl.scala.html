@(args: ScRenderArgs)(implicit ctx: Context)

@* Начальная страница для sio-market. Многочисленные аргументы передаются в контейнере для удобства передачи оных в подшаблоны. *@

@import util.TplDataFormatUtil._


@* Картинка-приветствие для первого экрана *@
@if(!args.syncRender) {
  @_welcomeScreenTpl(args)
}

@* Основной контейнер, шапка + карточки *@
<div class="sm-focused-ads" id="smFocusedAds"></div>

@* Хидер главного экрана *@
<div id="smRootProducerHeader" class="sm-producer-header abs" style="@stuff._bgcolor( args.bgColor )" data-gl-go-back="@args.geoListGoBack.exists(identity)">

  <span id="smRootProducerHeaderButtons">

    @if(!args.syncRender) {
      <div class="sm-producer-header_exit-button sm-button sm-producer-header_btn __left-aligned abs" id="smExitButton">
        @svg._exitButtonTpl( args.fgColor )
      </div>
    }

    @* Кнопка доступа к гео-панели. При синхронном рендере её нужно скрывать, если панель уже на экране. *@
    @defining( args.jsStateOpt.filter(!_.isNavScrOpened) ) { jsStateOpt =>
      @jsStateOpt.map { jsState =>
        <a href="@routes.MarketShowcase.syncGeoSite(jsState.toggleNavScreen)">
      }
      <div class="sm-producer-header_geo-button sm-button sm-producer-header_btn __left-aligned abs @if(!args.syncRender || !jsStateOpt) {hidden}" id="smGeoScreenButton">
        @svg._geoFillTpl( args.fgColor )
      </div>
      @if(jsStateOpt) {
        </a>
      }
    }

    <div class="sm-producer-header_index-button sm-button sm-producer-header_btn __left-aligned abs" id="smIndexButton">
      @svg._indexAdsButtonTpl( args.fgColor )
    </div>

    <div class="sm-producer-header_search-button sm-button sm-producer-header_btn __right-aligned abs" id="smNavigationLayerButton">
      @svg._navLayerButtonTpl( args.fgColor )
    </div>

  </span>

  <span class="sm-producer-header_txt-logo" style="color: #@args.fgColor; border-color: #@args.fgColor;">
    @args.name
    <span class="sm-producer-header_txt-logo-dot __left" style="background: #@args.fgColor;"></span>
    <span class="sm-producer-header_txt-logo-dot __right" style="background: #@args.fgColor;"></span>
  </span>

  @*
  <img class="sm-producer-header_logo" height="30" src="@args.logoImgUrl"/>
  *@

  <div class="sm-producer-header_icon">
    @svg._catHeaderIcon( args.fgColor )
  </div>

</div>

@* Работа с сеткой карточек *@
@_gridAdsTpl(args)

@* Окно с выбором категорий *@
@_categories_w_search(args)

@* Окно с предупреждением о выходе из Sio.Market *@
@_exit_screen(args)

@* Окно с версткой гео-меню *@
@if( !args.syncRender || args.jsStateOpt.exists(_.isNavScrOpened) ) {
  @_geo_screen(args)
}

@if(!args.syncRender) {
  <div id="fsLoaded" class="fs-loader" style="background: rgba( @{colorHex2rgb( args.bgColor ).mkString(",")}, 0.3);">
    <div class="fs-loader_spinner">@svg._spinnerTpl(args.fgColor)</div>
  </div>
}

<div class="sm-loading" id="smLoading"></div>
