@(mads: Seq[MAd], prodsMap: Map[String, MAdnNode], currPage: Int, hasNextPage: Boolean, adnNodeOpt: Option[MAdnNode] = None)(implicit ctx: Context)

@* Страница для отображения списка карточек, бесплатно размещенных и требующих пост-модерации s.io. *@
@import market.showcase._
@import ctx._
@import market.lk.ad._

@headAfter = {
  <link rel="stylesheet" type="text/css" href='@routes.Assets.at("stylesheets/market/lk/ads-list.min.css")'/>
}

@mdrBase(
  title = "Free Advs",
  headAfter = Some(headAfter),
  adnNodeOpt = adnNodeOpt
) {
  <h2>Саморазмещённые (бесплатные) карточки, подлежащие модерации</h2>

  @* Рендерим список рекламных карточек. *@
  <div class="ovh">

    @_adsListTpl(mads, coverDisableReason = true, startIndex = 0, itemsInLine = 4) { mad =>

      <a class="free-ad__link blue-link" href="@routes.SysMarket.showAdnNode(mad.producerId)">@prodsMap.get(mad.producerId).fold {
        ? ? ?
      } { producer =>
        @producer.meta.name / @producer.meta.town
      }</a>

      <div class="border-line"></div>

      <a class="free-ad__link blue-link" href="@routes.MarketAd.editAd(mad.id.get)">Редактировать объявление</a>

      <a class="free-ad__link blue-link" href="@routes.MarketLkAdn.showAdnNode(mad.producerId)">Перейти в ЛК</a>


      <a class="transparent-btn transparent-btn_gray" href="@routes.SysMdr.freeAdvMdr(mad.id.get)">
        <div class="transparent-btn__white-top" style="padding: 10px 0;">
          <span class="transparent-btn_gray__text font-30">МОДЕРИРОВАТЬ</span>
        </div>
      </a>
    }

  </div>

  @* Рендерим переключение страниц. *@
  Страницы:
  @if(currPage > 1) {
    <a href="@routes.SysMdr.freeAdvs(MdrSearchArgs(page = 0))">Первая</a>
  }
  @if(currPage > 0) {
    <a href="@routes.SysMdr.freeAdvs(MdrSearchArgs(page = currPage - 1))">Предыдущая</a>
  }
  <strong>@currPage</strong>
  @if(hasNextPage) {
    <a href="@routes.SysMdr.freeAdvs(MdrSearchArgs(page = currPage + 1))">Следующая</a>
  }
}
