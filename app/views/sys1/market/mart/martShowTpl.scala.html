@(mmart: MAdnNode, shops:Seq[MAdnNode], owner: Option[MCompany] = None)(implicit ctx: util.Context)

@* Страница, отображающая информацию по торговому центру. *@
@import sys1.market._, shop._
@import ctx._
@import datetime._
@import helper._

@martBase(mmart.meta.name) {
  <h2>@mmart.meta.name</h2>

  <p><a href="@routes.MarketMartLk.martShow(mmart.id.get)"><b>-&gt; Личный кабинет ТЦ</b></a></p>
  <p><a href="@routes.Market.martIndex(mmart.id.get)"><b>-&gt; Входная страница</b></a></p>
  <p><a href="@routes.Market.demoWebSite(mmart.id.get)"><b>-&gt; demoWebSite</b></a></p>

  <p>@Messages("Mart"). <a href="@routes.SysMarket.martEditForm(mmart.id.get)">@Messages("Edit")</a></p>

  <br/>

  <p>@Messages("Address"): @mmart.meta.address</p>
  @owner.map { mc =>
    <p>@Messages("Owner"): <a href="@routes.SysMarket.companyShow(mc.id.get)">@mc.name</a></p>
  }
  @mmart.meta.siteUrl.map { siteUrl =>
    <p>Ссылка на сайт: <a href="@siteUrl">@siteUrl</a></p>
  }
  <p>@Messages("Created"): @_prettyDate(mmart.meta.dateCreated, withSpan = true)</p>

  @if(shops.isEmpty) {
    <p>В этом торговом центре нет зарегистрированных магазинов.</p>
  } else {
    <h3>Магазины в торговом центре (@shops.size)</h3>
    @_shopsListTpl(shops, marts=Some(Map(mmart.id.get -> mmart)))
  }

  <h3>Управление</h3>
  <p><a href="@routes.SysMarket.shopAddForm">Создать новый магазин</a></p>
  <p><a href="@routes.MarketCategory.showCatsFor(mmart.id.get)">Категории ТЦ</a></p>
  <p><a href="@routes.SysMarket.martInviteForm(mmart.id.get)">Инвайты на управление ТЦ</a></p>


  @* Кнопки для имитиации добавления/удаления уже существующего ТЦ. Потом надо будет их наверное удалить или запретить их трогать через доп.ACL. *@
  <br/><br/>
  <h3>Команды</h3>
  @_martDeleteFormTpl(mmart.id.get)
}
