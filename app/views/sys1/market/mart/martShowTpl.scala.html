@(mmart: MMart, shops:Seq[MShop], owner: Option[MCompany] = None)(implicit ctx: util.Context)

@* Страница, отображающая информацию по торговому центру. *@
@import sys1.market._, shop._
@import ctx._
@import datetime._
@import helper._

@martBase(mmart.name) {
  <h2>@mmart.name</h2>

  <p><a href="@routes.MarketMartLk.martShow(mmart.id.get)"><b>-&gt; Личный кабинет ТЦ</b></a></p>

  <p>@Messages("Mart"). <a href="@routes.SysMarket.martEditForm(mmart.id.get)">@Messages("Edit")</a></p>
  @_martDeleteFormTpl(mmart.id.get)

  <br/>

  <p>@Messages("Address"): @mmart.address</p>
  @owner.map { mc =>
    <p>@Messages("Owner"): <a href="@routes.SysMarket.companyShow(mc.id.get)">@mc.name</a></p>
  }
  @mmart.siteUrl.map { siteUrl =>
    <p>Ссылка на сайт: <a href="@siteUrl">@siteUrl</a></p>
  }
  <p>@Messages("Created"): @_prettyDate(mmart.dateCreated, withSpan = true)</p>

  @if(shops.isEmpty) {
    <p>В этом торговом центре нет зарегистрированных магазинов.</p>
  } else {
    <h3>Магазины в торговом центре (@shops.size)</h3>
    @_shopsListTpl(shops, marts=Some(Map(mmart.id.get -> mmart)))
  }

  <a href="@routes.SysMarket.shopAddForm">Создать новый магазин</a>
  <p><a href="@routes.MarketCategory.showCatsFor(mmart.id.get)">Категории ТЦ</a></p>


  @* Кнопки для имитиации добавления/удаления уже существующего ТЦ. Потом надо будет их наверное удалить или запретить их трогать через доп.ACL. *@
  <br/><br/>
  @form(routes.SysMarket.inx2handleMartAdd(mmart.id.get)) {
    <input type="submit" value="IndicesUtil.handleMartAdd()" title="Имитация реакции индексов на добавление указанного ТЦ"/>
  }
  @form(routes.SysMarket.inx2handleMartDelete(mmart.id.get)) {
    <input type="submit" value="IndicesUtil.handleMartDelete()" title="Имитация реакции индексов на добавление указанного ТЦ"/>
  }

}
