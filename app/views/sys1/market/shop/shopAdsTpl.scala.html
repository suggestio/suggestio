@(mads: Seq[MAdT], mshop: MAdnNode, adFreqs: AdFreqs_t)(implicit ctx: util.Context)

@* Список реклам и сервисных функций. *@
@import AdStatActions._
@import util.TplDataFormatUtil._
@import AdStatActions._

@hPathAfter1 = {
  / Реклама
}

@thisShopBase("Рекламные карточки", mshop, hPathAfter = Some(hPathAfter1)) {
  @mads.map { mad =>
    <a href="@routes.MarketAd.editShopAd(mad.id.get)">@mad.offers.headOption.map {
      case prod: AOProduct => {
        @prod.vendor.value / @formatPrice(prod.price.value, prod.price.currency)
      }
      case disco: AODiscount => {
        @disco.text1.map(_.value) /
        @formatPercentRaw(disco.discount.value)% /
        @disco.text2.map(_.value)
      }
      case adText: AOText => {
        @adText.text
      }
    }</a>
    <p>Отобразить email-сообщение о деактивации:
      @Seq(true -> "HTML", false -> "TXT").map { case (isHtml, linkText) =>
        <a href="@routes.SysMarket.showShopEmailAdDisableMsg(mad.id.get, isHtml = isHtml)">@linkText</a>
      }
    </p>

    <p>Stat:
      @adFreqs.get(mad.id.get).map { freqs =>
        За последние @MAdStat.TTL_DAYS_DFLT дней:
        @freqs.map { case (action, freq) =>
          @action: @freq
        }
      }
    </p>
    @Seq(View -> "просмотра", Click -> "клика").map { case (asa, txt) =>
      @helper.form(routes.Market.adStats(martId = mshop.adn.supId.get, adId = mad.id.get, action = asa.toString)) {
        <input type="submit" value="Имитация @txt"/>
      }
    }

    <br/><br/>
  }
}
