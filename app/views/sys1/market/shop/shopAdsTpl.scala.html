@(mads: Seq[MMartAd], mshop: MShop)(implicit ctx: util.Context)

@* Список реклам и сервисных функций. *@
@import AdStatActions._
@import util.TplDataFormatUtil._

@thisShopBase("Рекламные карточки", mshop) {
  @mads.map { mad =>
    <a href="@routes.MarketAd.editShopAd(mad.id.get)">@mad.offers.headOption.map {
      case prod: MMartAdProduct => {
        @prod.vendor.value / @formatPrice(prod.price.value, prod.price.currency)
      }
      case disco: MMartAdDiscount => {
        @disco.text1.map(_.value) /
        @formatPercentRaw(disco.discount.value)% /
        @disco.text2.map(_.value)
      }
      case adText: MMartAdText => {
        @adText.text
      }
    }</a>
    <p>Отобразить email-сообщение о деактивации:
      @Seq(true -> "HTML", false -> "TXT").map { case (isHtml, linkText) =>
        <a href="@routes.SysMarket.showShopEmailAdDisableMsg(mad.id.get, isHtml = isHtml)">@linkText</a>
      }
    </p>

    <p>Stat:
    @Seq(View -> "просмотра", Click -> "клика").map { case (asa, txt) =>
      @helper.form(routes.Market.adStats(martId = mad.martId, adId = mad.id.get, action = asa.toString)) {
        <input type="submit" value="Имитация @txt"/>
      }
    }</p>

    <br/><br/>
  }
}
