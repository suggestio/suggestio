@(mshop: MShop, spls: Seq[MShopPriceList], ownerOpt:Option[MCompany] = None, mmartOpt: Option[MMart] = None)(implicit ctx: util.Context)

@* Страница с информацией по одному магазину. *@
@import datetime._
@import ctx._


@thisShopBase(title=mshop.name, mshop=mshop, mmartOpt=mmartOpt) {
  <h2>Магазин "@mshop.name"</h2>

  <p><a href="@routes.MarketShopLk.showShop(mshop.id.get)"><b>-&gt; Личный кабинет арендатора</b></a></p>

  <a href="@routes.SysMarket.shopEditForm(mshop.id.get)">@Messages("Edit")</a>
  @_shopDeleteFormTpl(mshop.id.get)

  @ownerOpt.map { mc =>
    <p>Компания-владелец: <a href="@routes.SysMarket.companyShow(mc.id.get)">@mc.name</a></p>
  }

  @mmartOpt.map { mmart =>
    <p>ТЦ <a href="@routes.SysMarket.martShow(mmart.id.get)">@mmart.name</a> по адресу @mmart.address.</p>
  }

  <br/>
  Этаж @mshop.martFloor match {
    case Some(floor) => {
      @floor.
    }
    case None => {
      не указан.
    }
  }

  Секция @mshop.martSection match {
    case Some(section) => {
      @section.
    }
    case None => {
      не указана.
    }
  }

  <p>Магазин создан @_prettyDate(mshop.dateCreated, isCap = false, withSpan = true).</p>

  <h3>Описание</h3>
  <p>@mshop.description</p>

  <h3>Внешние прайс-листы</h3>

  @if(spls.isEmpty) {
    У магазина нет внешних прайс-листов.
  } else {
    @pricelist._splsListTpl(spls, withShop=None)
  }

  <p>
      <a href="@routes.SysMarket.splAddForm(mshop.id.get)">Добавить источник прайс-листа.</a>
  </p>
  <p>
      <a href="@routes.MarketOffer.showShopPromoOffers(mshop.id.get)">ЛК: Товары магазина</a>
  </p>
}
