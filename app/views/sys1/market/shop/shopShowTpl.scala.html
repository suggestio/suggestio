@(mshop: MShop)(implicit ctx: util.CtxWithSqlConn)

@* Страница с информацией по одному магазину. *@
@import datetime._
@import ctx._


@thisShopBase(title=mshop.name, mshop=mshop) {
  <h2>Магазин "@mshop.name"</h2>
  <a href="@routes.SysMarket.shopEditForm(mshop.id.get)">@Messages("Edit")</a>
  @_shopDeleteFormTpl(mshop.id.get)

  <p>Компания-владелец: <a href="@routes.SysMarket.companyShow(mshop.company_id)">@mshop.company.name</a></p>

  @defining(mshop.mart) { mmart =>
    <p>ТЦ <a href="@routes.SysMarket.martShow(mshop.mart_id)">@mmart.name</a> по адресу @mmart.address.</p>
  }

  <br/>
  Этаж @mshop.mart_floor match {
    case Some(floor) => {
      @floor.
    }
    case None => {
      не указан.
    }
  }

  Секция @mshop.mart_section match {
    case Some(section) => {
      @section.
    }
    case None => {
      не указана.
    }
  }

  <p>Магазин создан @_prettyDate(mshop.date_created, isCap = false, withSpan = true).</p>

  <h3>Описание</h3>
  @mshop.description

  <h3>Внешние прайс-листы</h3>

  @defining(mshop.priceLists) { spls =>
    @if(spls.isEmpty) {
      У магазина нет внешних прайс-листов.
    } else {
      @pricelist._splsListTpl(spls, withShop=None)
    }
  }
  <a href="@routes.SysMarket.splAddForm(mshop.id.get)">Добавить источник прайс-листа.</a>
}
