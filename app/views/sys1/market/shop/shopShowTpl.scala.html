@(mshop: MAdnNode, spls: Seq[MShopPriceList], ownerOpt:Option[MCompany] = None, mmartOpt: Option[MAdnNode] = None)(implicit ctx: util.Context)

@* Страница с информацией по одному магазину. *@
@import datetime._
@import ctx._


@thisShopBase(title=mshop.meta.name, mshop=mshop, mmartOpt=mmartOpt) {
  <h2>Магазин "@mshop.meta.name"</h2>

  <p><a href="@routes.MarketLkAdn.showAdnNode(mshop.id.get)"><b>-&gt; Личный кабинет арендатора</b></a></p>

  <p><a href="@routes.SysMarketBilling.billingFor(mshop.id.get)">Billing</a></p>

  @ownerOpt.map { mc =>
    <p>Компания-владелец: <a href="@routes.SysMarket.companyShow(mc.id.get)">@mc.name</a></p>
  }

  @mmartOpt.map { mmart =>
    <p>ТЦ <a href="@routes.SysMarket.martShow(mmart.id.get)">@mmart.meta.name</a> по адресу @mmart.meta.address.</p>
  }

  <br/>
  Этаж @mshop.meta.floor.getOrElse {не указан}.
  Секция @mshop.meta.section.getOrElse {не указан}.

  <p>Магазин создан @_prettyDate(mshop.meta.dateCreated, isCap = false, withSpan = true).</p>

  <h3>Описание</h3>
  <p>@mshop.meta.description</p>

  <h3>Внешние прайс-листы</h3>

  @if(spls.isEmpty) {
    У магазина нет внешних прайс-листов.
  } else {
    @pricelist._splsListTpl(spls, withShop=None)
  }

  <p>
      <a href="@routes.SysMarket.splAddForm(mshop.id.get)">Добавить источник прайс-листа.</a>
  </p>
  <p>
      <a href="@routes.MarketOffer.showShopPromoOffers(mshop.id.get)">ЛК: Товары магазина</a>
  </p>
  <p><a href="@routes.MarketCategory.showCatsFor(mshop.id.get)">Категории магазина</a></p>
  <p>Отобразить email-письмо активации:
      <a href="@routes.SysMarket.showShopEmailActMsgHtml(mshop.id.get, isHtml=true)">HTML</a>
      <a href="@routes.SysMarket.showShopEmailActMsgHtml(mshop.id.get, isHtml=false)">TXT</a>
  </p>
  <p><a href="@routes.SysMarket.showAdnNodeAds(mshop.id.get)">Список рекламы магазина.</a></p>

  <br/><br/>
  @stuff._deleteSmthFormBtnTpl(routes.SysMarket.deleteAdnNodeSubmit(mshop.id.get))
}
