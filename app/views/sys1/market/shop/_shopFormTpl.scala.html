@(call:Call, sf: Form[_], btnText:String, companies:Seq[MCompany], marts:Seq[MMart])(implicit ctx: util.Context)

@* Форма для добавления/редактирования магазинов в системной админке. *@
@import helper._
@import ctx._

@form(call) {
  @inputText(sf("name"))

  @* Компания, к которой принадлежит магазин. В продакшене это будет задаваться неявно. *@
  @defining(sf("company_id")) { ciField =>
    <select name="@ciField.name">
      <option disabled>@Messages("Company")-@Messages("Owner")</option>
      @defining(ciField.value.orElse(request.getQueryString("company_id")).getOrElse("")) { currCompanyId =>
        @companies.map { mcompany =>
          <option value="@mcompany.id.get"@if(currCompanyId == mcompany.id.get) {selected}>@mcompany.name</option>
        }
      }
    </select>
  }

  @* Торговый центр, к которому привязан магазин. В продакшене это будет задаваться неявно. *@
  @defining(sf("mart_id")) { miField =>
    <select name="@miField.name">
      <option disabled>@Messages("Mart")</option>
      @defining(miField.value.orElse(request.getQueryString("mart_id")).getOrElse("")) { currMartId =>
        @marts.map { mmart =>
          <option value="@mmart.id.get"@if(currMartId == mmart.id.get) {selected}>@mmart.name</option>
        }
      }
    </select>
  }

  @* Опциональный номер этажа в ТЦ. *@
  @inputText(
    sf("mart_floor"),
    'placeholder -> 1,
    '_label -> "Этаж"
  )

  @* Опциональный номер секции в ТЦ. *@
  @inputText(
    sf("mart_section"),
    'placeholder -> 101,
    '_label -> "Номер секции"
  )

  @textarea(
    sf("description"),
    '_label -> "Описание магазина"
  )

  <input type="submit" value="@btnText"/>
}