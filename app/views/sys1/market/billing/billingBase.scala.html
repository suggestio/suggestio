@(title: String, nodeOpt: Option[MAdnNode] = None, hPathAfter: Option[Html] = None, mbcOpt: Option[MBillContract] = None)(content: Html)(implicit ctx: util.Context)

@* Подложка страниц с управлением биллингом. *@

@hPathAfter1 = {
  @mbcOpt.map { mbc =>
    / mbc.legalContractId
  }
  @hPathAfter.getOrElse {
    / @title
  }
}

@defining( title + " | billing" ) { title1 =>

  @if(nodeOpt.isEmpty) {

   @* ADN-Узел не задан. Рендерим через примитивный marketBase *@
   @sys1.market.marketBase(
     title = title1,
     hPathAfter = Some(hPathAfter1)
   )(content)

  } else {

    @* Задан adn-узел, рендерим через adnBase *@
    @sys1.market.adn.adnBase(
      title = title1,
      hPathAfter = Some(hPathAfter1),
      nodeOpt = nodeOpt
    )(content)

  }

}
