@(mir: MInviteRequest)(implicit ctx: Context)

@* Отображение одного реквеста. *@
@import ctx._
@import stuff._

@yn(b: Boolean) = {
  @(if(b) Messages("Yes") else Messages("No"))
}

@irBase(title = mir.meta.company) {

  <h3>@Messages("mir.type." + mir.reqType)</h3>

  @* Рендерим раздел метаданных. *@
  <p>Компания: @mir.meta.company</p>
  <p>Адрес:</p>
  <pre>@mir.meta.address</pre>
  <p>Офисный телефон: @mir.meta.officePhone</p>
  <p>Email: <a href="mailto:@mir.meta.email">@mir.meta.email</a></p>
  @mir.meta.audienceDescr.map { aud =>
    <p>Описание аудитории: @aud</p>
  }
  @mir.meta.humanTraffic.map { ht =>
    <p>Людской траффик: @ht</p>
  }
  @mir.meta.siteUrl.map { siteUrl =>
    <p>Ссылка на сайт: <a href="@siteUrl">@siteUrl</a></p>
  }
  @mir.meta.info.map { info =>
    <p>Информация: </p>
    <pre>@info</pre>
  }
  @mir.meta.floor.map { floor =>
    <p>Этаж: @floor</p>
  }
  @mir.meta.section.map { section =>
    <p>Секция: @section</p>
  }
  @mir.meta.payReqs.map { payReqs =>
    <p>Реквизиты платежа:</p>
    <pre>@payReqs</pre>
  }

  @* Ответы на вопросы по поводу wi-fi, если есть. *@
  @mir.joinAnswers.map { ja =>
    @ja.haveWifi.map { hw =>
      <p>Wi-Fi оборудование: @yn(hw)</p>
    }
    @ja.fullCoverage.map { fc =>
      <p>Полное покрытие помещения: @yn(fc)</p>
    }
    @ja.knownEquip.map { ke =>
      <p>Известное оборудование: @yn(ke)</p>
    }
    @ja.altFw.map { altFw =>
      <p>Альтернативная прошивка на wi-fi оборудовании: @yn(altFw)</p>
    }
    @ja.isWrtFw.map { isWrt =>
      <p>dd-wrt/openwrt/routerOS: @yn(isWrt)</p>
    }
    @ja.landlineInet.map { llInet =>
      <p>Стационарный интернет: @yn(llInet)</p>
    }
    @ja.smallRoom.map { sr =>
      <p>Малое помещение: @yn(sr)</p>
    }
    @ja.audienceSz.map { auSz =>
      <p>Кол-во пользователей: @Messages("join.qsn.audienceSz." + auSz)</p>
    }
  }

  @mir.progress.map { p =>
    <h3>Исполнение запроса</h3>

    @* TODO Раскомментить, когда при создании кампании будет происходить обновление экземпляра MInviteRequest. *@
    @*p.companyIdOpt.fold {
      <a href="@routes.SysMarket.companyAddForm( Some(MCompany(name = mir.meta.company)) )">Создать новую компанию...</a>
    } { companyId =>
      <a href="@routes.SysMarket.companyShow(companyId)">Перейти к компании</a>
      TODO Надо добавить сюда обработку adn_id
    }*@
  }

  @_deleteSmthFormBtnTpl( routes.SysMarketInvReq.deleteIR(mir.id.get) )
}
