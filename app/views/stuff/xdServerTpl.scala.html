<!doctype html>
<html>
<body>
<script type="text/javascript">

  (function(){
    function handleRequest(event){
      var data = JSON.parse(event.data),
          value = sessionStorage.getItem(data.key);
      if( typeof( data.value ) != 'undefined' ){
        sessionStorage.setItem(data.key, data.value);
      }else{
        console.log('get ' + data.key + ' is ' + value)
        event.source.postMessage(JSON.stringify({id: data.id, key:data.key, value: value}), event.origin);
      }
    }
    if(window.addEventListener){
      window.addEventListener("message", handleRequest, false);
    } else if (window.attachEvent){
      window.attachEvent("onmessage", handleRequest);
    }
  })();
</script>
</body>
</html>