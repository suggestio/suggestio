@(imgId:String, width: Int, height: Int, markerOpt: Option[String], imeta: MImgInfoMeta, cropOpt: Option[ImgCrop])(implicit ctx: util.Context)

@import ctx._
@import helper._

<div class="popup __size-M" id="imgCropTool" data-width="@width" data-height="@height">

  <div class="popup_header">
    <a class="close f-right js-close-popup"></a>
  </div>

  <h2 class="minor-title">Редактирование изображения</h2>

  <div class="popup_cnt">

    <div class="market-crop-tool__container js-crop-container" style="width: @width; height: @height;">

      <div>
      @* Здесь у нас загружается исходное изображение, которое js-ом ресайзится до размеров родительского контейнера *@
      @* TODO: аттрибуты data-width и data-height надо заменить на реальные значения *@
      <img class="bg abs" data-width="@imeta.width" data-height="@imeta.height" src="@routes.Img.getImg(imgId)" />
      </div>

    </div>

    @form(routes.Img.imgCropSubmit) {
      <input type="hidden" name="imgId" value="@imgId"/>
      <input type="hidden" name="crop" value="@cropOpt.map(_.toCropStr)"/>

      @* TODO в value, судя по всему, нужно что-то добавить *@
      <input type="hidden" name="resize" value=""/>

      @markerOpt.map { marker =>
        <input type="hidden" name="marker" value="@marker"/>
      }

      <div class="submit-w __size-M">
        <button class="btn __major __size-M" type="submit">@Messages("Save")</button>
      </div>


  </div>

  }

</div>